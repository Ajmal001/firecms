(this["webpackJsonpfirecms-example"]=this["webpackJsonpfirecms-example"]||[]).push([[0],{216:function(e,t,a){e.exports=a.p+"static/media/test_shop_logo.869a9462.png"},262:function(e,t,a){e.exports=a(323)},267:function(e,t,a){},323:function(e,t,a){"use strict";a.r(t),a.d(t,"testEntitySchema",(function(){return ka}));var n=a(0),r=a.n(n),i=a(14),l=a.n(i),o=(a(267),a(216)),c=a.n(o),u=a(238),s=a.n(u);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=a(371),d=a(373),p=a(136),f=a(213),v=a(214),E=a(328),h=a(105),g=a(374),b=a(335),y=a(378),j=a(329),w=a(420),O=a(191),T=a(379),P=a(377),k=a(332),C=a(380),x=a(381),S=a(382),I=a(383),F=a(421),V=a(385),q=a(386),D=a(387),L=a(392),M=a(414),N=a(415),_=a(396),A=a(337),W=a(334),R=a(413),U=a(397),B=a(398),H=a(399),z=a(400),G=a(401),Y=a(390),J=a(391),K=a(393),X=a(403),Z=a(406),$=a(407),Q=a(411),ee=a(402),te=a(409),ae=a(388),ne=a(423),re=a(412),ie=a(416),le=a(235),oe=a.n(le),ce=a(410),ue=a(33),se=a(239),me=(a(268),a(10)),de=a(150),pe=a(15),fe=a(395),ve=a(67),Ee=a(93),he=a(28),ge=a.n(he),be=(a(277),a(389)),ye=a(417),je=a(418),we=a(173),Oe=a(230),Te=a.n(Oe),Pe=a(229),ke=a.n(Pe),Ce=(a(278),a(279),a(174)),xe=a.n(Ce),Se=a(226),Ie=a.n(Se),Fe=a(375),Ve=a(16),qe=a(175),De=a.n(qe),Le=a(246),Me=a(227),Ne=a.n(Me),_e=a(384),Ae=a(228),We=a.n(Ae),Re=a(219),Ue=a.n(Re),Be=a(139),He=a.n(Be),ze=a(240),Ge=a(232),Ye=a.n(Ge),Je=a(404),Ke=a(405),Xe=a(77),Ze=a(408),$e=a(422),Qe=a(233),et=a.n(Qe),tt=a(234),at=a.n(tt);function nt(e){return r.a.createElement(m.a,{display:"flex",width:"100%",height:"100vh"},r.a.createElement(m.a,{m:"auto"},r.a.createElement(d.a,Object.assign({},e))))}var rt=function(e){var t=e.children;return r.a.createElement(m.a,{display:"flex"},r.a.createElement(p.a,{elevation:0},r.a.createElement(m.a,{p:1,pr:2,pl:2},t)))},it=Object(f.a)((function(e){var t,a,n;return Object(v.a)({root:{display:"flex",width:"100%",marginTop:e.spacing(3)},drawer:(t={},t[e.breakpoints.up("md")]={width:240,flexShrink:0},t),appBar:(a={},a[e.breakpoints.up("md")]={width:"calc(100% - 240px)",marginLeft:240},a),menuButton:(n={marginRight:e.spacing(2)},n[e.breakpoints.up("md")]={display:"none"},n),grow:{flexGrow:1},toolbar:e.mixins.toolbar,logo:{padding:e.spacing(3),maxWidth:240},drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3),width:"calc(100% - 240px)"},filter:{flexGrow:1,padding:e.spacing(1)},table:{minWidth:750},tableWrapper:{overflow:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tree:{height:216,flexGrow:1,maxWidth:400}})})),lt=Object(f.a)((function(e){var t,a,n;return{appBar:{position:"relative"},layout:(t={width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},t[e.breakpoints.up(600+2*e.spacing(2))]={width:600,marginLeft:"auto",marginRight:"auto"},t),paper:(a={padding:e.spacing(1)},a[e.breakpoints.up(600+2*e.spacing(3))]={padding:e.spacing(2)},a),dropZone:{"&:hover":{backgroundColor:"#f5f5f5"}},activeDrop:{backgroundColor:"#f5f5f5"},acceptDrop:{borderColor:e.palette.success.main},rejectDrop:{borderColor:e.palette.error.main},uploadItem:{padding:e.spacing(1),minWidth:220,minHeight:220},formPaper:(n={marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(2)},n[e.breakpoints.up(600+2*e.spacing(3))]={},n),buttons:{display:"flex",justifyContent:"flex-end"},button:{margin:e.spacing(1)},form:{marginTop:e.spacing(2)}}})),ot=Object(f.a)((function(e){return Object(v.a)({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(me.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"},searchBar:{flex:"1 1 100%"}})}));Object(de.a)({palette:{background:{default:"#f1f1f1"},primary:{main:"#03238d"},secondary:{main:"#8AC9BD"},error:{main:we.a.A400}},typography:{h6:{fontSize:16,fontWeight:600}},shape:{borderRadius:2}});function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ut(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}function st(e,t,a){return console.debug("fetch entity",e,t),Object(he.firestore)().collection(e).doc(t).get().then((function(e){return mt(e,a)}))}function mt(e,t){var a=function(e,t){var a=e;return Object.entries(t.properties).forEach((function(t){var n,r=t[0],i=t[1];e&&e[r]?a[r]=e[r]:(null===(n=i.validation)||void 0===n?void 0:n.required)&&(a[r]=void 0)})),a}(function e(t){if("object"!==typeof t||t instanceof he.firestore.DocumentReference||t instanceof he.firestore.GeoPoint)return t;var a={};return Object.entries(t).forEach((function(t){var n=t[0],r=t[1];r&&r instanceof he.firestore.Timestamp?r=r.toDate():Array.isArray(r)?r=r.map((function(t){return e(t)})):r&&"object"===typeof r&&(r=e(r)),a[n]=r})),a}(e.data()),t);return{id:e.id,snapshot:e,reference:e.ref,values:a||dt(t)}}function dt(e){return Object.entries(e.properties).filter((function(e){var t;return null===(t=e[1].validation)||void 0===t?void 0:t.required})).map((function(e){var t;return(t={})[e[0]]=void 0,t})).reduce((function(e,t){return ct({},e,{},t)}),{})}function pt(e,t){return Object(he.storage)().ref().child(t+"/"+e.name).put(e)}function ft(e){return Object.entries(e).filter((function(e){return e[1].includeInListView}))}function vt(e){return Object.entries(e).filter((function(e){return e[1].filterable}))}function Et(e){var t=e.name,a=e.property,i=a.enumValues;return r.a.createElement(Ve.b,{name:""+t},(function(e){var l=e.field,o=e.form.setFieldValue,c=(ut(e,["field","form"]),l.value?l.value:["==",void 0]),u=c[0],s=c[1],m=Object(n.useState)(u),d=m[0],p=m[1],f=Object(n.useState)(s),v=f[0],w=f[1];function O(e,a){p(e),w(v),o(t,e&&a?[e,a]:void 0)}return r.a.createElement(E.a,{fullWidth:!0},r.a.createElement(h.a,{variant:"caption"},a.title||t),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:3},r.a.createElement(b.a,{value:d,autoWidth:!0,onChange:function(e){O(e.target.value,v)}},r.a.createElement(y.a,{value:"=="},"=="),r.a.createElement(y.a,{value:">"},">"),r.a.createElement(y.a,{value:"<"},"<"),r.a.createElement(y.a,{value:">="},">="),r.a.createElement(y.a,{value:"<="},"<="))),!i&&r.a.createElement(g.a,{item:!0,xs:9},r.a.createElement(j.a,{key:"filter-"+t,type:"number"===a.dataType?"number":void 0,defaultValue:v,onChange:function(e){var t="number"===a.dataType?parseFloat(e.target.value):e.target.value;O(d,t)}})),i&&r.a.createElement(g.a,{item:!0,xs:9},r.a.createElement(b.a,{fullWidth:!0,key:"filter-"+t,value:v,onChange:function(e){O(d,e.target.value)}},Object.entries(i).map((function(e){var t=e[0],a=e[1];return r.a.createElement(y.a,{key:"select-"+t,value:t},a)}))))))}))}function ht(e){var t=e.schema,a=e.filterValues,n=e.onFilterUpdate,i=vt(t.properties),l=it();function o(e){return r.a.createElement(m.a,{className:l.filter,width:220},i.map((function(e){var t=e[0],a=function(e,t){if("number"===t.dataType||"string"===t.dataType)return r.a.createElement(Et,{name:e,property:t});return r.a.createElement("div",null,"Currently the field "+t.dataType+" is not supported")}(t,e[1]);return r.a.createElement(m.a,{key:"filter_"+t,mb:1},a)})))}var c=a||function(e){return Object.entries(e.properties).filter((function(e){return e[1].filterable})).map((function(e){var t;return(t={})[e[0]]=void 0,t})).reduce((function(e,t){return ct({},e,{},t)}),{})}(t);return r.a.createElement(xe.a,{variant:"popover",popupId:"collection-filter"},(function(e){return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(w.a,{title:"Clear filter"},r.a.createElement(O.a,{size:"small","aria-label":"filter clear",onClick:function(){return n(void 0)}},r.a.createElement(De.a,{fontSize:"small"}))):r.a.createElement(m.a,{style:{width:26}}),r.a.createElement(w.a,{title:"Filter list"},r.a.createElement(O.a,Object.assign({"aria-label":"filter list"},Object(Ce.bindTrigger)(e)),r.a.createElement(Ie.a,null))),r.a.createElement(Fe.a,Object.assign({},Object(Ce.bindPopover)(e),{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}}),r.a.createElement(m.a,{p:2},r.a.createElement(Ve.e,{initialValues:c,onSubmit:function(t){var a=ct({},t);console.log("Updating filters",a),Object.keys(a).forEach((function(e){return void 0===a[e]&&delete a[e]})),n(a),e.close()}},(function(e){var t=e.handleSubmit;return r.a.createElement(Ve.d,{onSubmit:t,noValidate:!0},o(),r.a.createElement(m.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(m.a,{p:1,justifyContent:"flex-end"},r.a.createElement(T.a,{size:"small",variant:"outlined",color:"primary",type:"submit"},"Ok"))))})))))}))}var gt=Object(f.a)((function(e){var t,a;return Object(v.a)({search:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(me.d)(e.palette.common.black,.05),"&:hover":{backgroundColor:Object(me.d)(e.palette.common.black,.1)},marginLeft:0,width:"100%"},t[e.breakpoints.up("sm")]={marginLeft:e.spacing(1),width:"auto"},t),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:(a={padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + "+e.spacing(4)+"px)",transition:e.transitions.create("width"),width:"100%"},a[e.breakpoints.up("sm")]={width:"12ch","&:focus":{width:"20ch"}},a)})}));function bt(e){var t=e.onTextSearch,a=gt(),i=Object(n.useState)(""),l=i[0],o=i[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){t(l||void 0)}),250);return function(){clearTimeout(e)}}),[l]),r.a.createElement("div",{className:a.search},r.a.createElement("div",{className:a.searchIcon},r.a.createElement(Ne.a,null)),r.a.createElement(Le.a,{placeholder:"Search",value:l,onChange:function(e){o(e.target.value)},classes:{root:a.inputRoot,input:a.inputInput},endAdornment:l?r.a.createElement(O.a,{size:"small",onClick:function(){o(""),t(void 0)}},r.a.createElement(De.a,{fontSize:"small"})):r.a.createElement(m.a,{style:{width:26}}),inputProps:{"aria-label":"search"}}))}function yt(e){var t,a=e.property,n=e.small;if(a||console.error("No property assigned for skeleton component",a,n),"string"===a.dataType){var i=a;t=i.urlMediaType?function(e,t){var a;void 0===t&&(t=!1);var n=e.urlMediaType||(null===(a=e.storageMeta)||void 0===a?void 0:a.mediaType);if("image"===n)return wt(t);if("audio"===n)return r.a.createElement(_e.a,{variant:"rect",width:300,height:100});if("video"===n)return function(e){return r.a.createElement(_e.a,{variant:"rect",width:e?300:500,height:e?200:250})}(t);throw Error("URL component misconfigured")}(i,n):i.storageMeta?wt(n):Ot()}else if("array"===a.dataType){var l=a;t="map"===l.of.dataType?function(e){var t=Object.entries(e).filter((function(e){return e[1].includeAsMapPreview}));t.length||(t=Object.entries(e).slice(0,3));return r.a.createElement(C.a,{size:"small"},r.a.createElement(x.a,null,[0,1,2].map((function(e,a){return r.a.createElement(S.a,{key:"table_"+e+"_"+a},t.map((function(e,t){var a=e[0],n=e[1];return r.a.createElement(I.a,{key:"table-cell-"+a,component:"th"},r.a.createElement(yt,{property:n,small:!0}))})))}))))}(l.of.properties):"string"===l.of.dataType?l.of.enumValues?r.a.createElement(g.a,null,[0,1].map((function(e,t){return Ot()}))):l.of.storageMeta?jt(l.of):r.a.createElement(g.a,null,[0,1].map((function(e,t){return Ot()}))):jt(l.of)}else t="map"===a.dataType?function(e){var t=Object.entries(e.properties).filter((function(e){return e[1].includeAsMapPreview}));t.length||(t=Object.entries(e.properties).slice(0,3));return r.a.createElement(P.a,null,t.map((function(e){var t=e[0],a=e[1];return r.a.createElement(k.a,{key:a.title+t},r.a.createElement(yt,{property:a,small:!0}))})))}(a):"timestamp"===a.dataType?Ot():"reference"===a.dataType?r.a.createElement(_e.a,{variant:"rect",width:200,height:100}):(a.dataType,Ot());return t||null}function jt(e){return r.a.createElement(g.a,null,[0,1].map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,{property:e,small:!0}))})))}function wt(e){return r.a.createElement(_e.a,{variant:"rect",width:e?100:200,height:e?100:200})}function Ot(){return r.a.createElement(_e.a,{variant:"text"})}function Tt(e){var t=e.storagePath,a=e.property,i=e.renderUrlComponent,l=e.small,o=r.a.useState(),c=o[0],u=o[1];return Object(n.useEffect)((function(){t&&function(e){return Object(he.storage)().ref(e).getDownloadURL()}(t).then((function(e){console.debug("File available at",e),u(e)}))}),[t]),c?i(a,c,l):wt(l)}function Pt(e){var t=e.reference,a=e.schema,r=e.previewComponent;if(!t)throw Error("Reference previews should be initialized with a value");var i=Object(n.useState)(),l=i[0],o=i[1];Object(n.useEffect)((function(){var e=function(e,t,a){return e.onSnapshot((function(e){return a(mt(e,t))}))}(t,a,(function(e){o(e)}));return function(){return e()}}),[t,a]);var c=Object.entries(a.properties).filter((function(e){return e[1].includeAsMapPreview}));return c.length||(c=Object.entries(a.properties).slice(0,3)),Object(n.createElement)(m.a,{display:"flex"},Object(n.createElement)(m.a,{mt:1.5},Object(n.createElement)(We.a,{color:"disabled"})),Object(n.createElement)(P.a,null,c.map((function(e){var t=e[0],a=e[1];return Object(n.createElement)(k.a,{key:"ref_prev"+a.title+t},l?Object(n.createElement)(r,{value:l.values[t],property:a,small:!0}):Object(n.createElement)(yt,{property:a,small:!0}))}))))}function kt(e){var t,a,n,i,l,o=e.value,c=e.property,u=e.small;if(!o)return null;if(c||console.error("No property assigned for preview component",o,c,u),"string"===c.dataType&&"string"===typeof o){var s=c;t=s.urlMediaType?xt(s,o,u):s.storageMeta?function(e,t,a){return r.a.createElement(Tt,{storagePath:t,property:e,small:a,renderUrlComponent:xt})}(s,o,u):s.enumValues?s.enumValues[o]:o}else if("array"===c.dataType&&o instanceof Array){var m=c;"map"===m.of.dataType?t=function(e,t){var a=Object.entries(e).filter((function(e){return e[1].includeAsMapPreview}));a.length||(a=Object.entries(e).slice(0,3));return r.a.createElement(C.a,{size:"small"},r.a.createElement(x.a,null,t&&t.map((function(e,t){return r.a.createElement(S.a,{key:"table_"+e+"_"+t},a.map((function(t,a){var n=t[0],i=t[1];return r.a.createElement(I.a,{key:"table-cell-"+n,component:"th"},r.a.createElement(kt,{value:e[n],property:i,small:!0}))})))}))))}(m.of.properties,o):"string"===m.of.dataType?m.of.enumValues?(i=m.of.enumValues,l=o,t=r.a.createElement(g.a,null,l&&l.map((function(e,t){return St(i,e)})))):t=m.of.storageMeta?Ct(m.of,o):function(e){if(e&&!Array.isArray(e))return r.a.createElement("div",null,"Unexpected value: "+e);return r.a.createElement(g.a,null,e&&e.map((function(e,t){return r.a.createElement(F.a,{size:"small",key:e,label:r.a.createElement(h.a,{variant:"caption",color:"textPrimary"},e)})})))}(o):t=Ct(m.of,o)}else t="map"===c.dataType&&"object"===typeof o?function(e,t){var a=Object.entries(e.properties).filter((function(e){return e[1].includeAsMapPreview}));a.length||(a=Object.entries(e.properties).slice(0,3));return r.a.createElement(P.a,null,a.map((function(e){var a=e[0],n=e[1];return r.a.createElement(k.a,{key:n.title+a},r.a.createElement(kt,{value:t[a],property:n,small:!0}))})))}(c,o):"timestamp"===c.dataType&&o instanceof Date?o&&o.toLocaleString():"reference"===c.dataType&&o instanceof he.firestore.DocumentReference?o&&(a=o,n=c.schema,r.a.createElement(Pt,{reference:a,schema:n,previewComponent:kt})):"boolean"===c.dataType?o?"Yes":"No":"object"===typeof o?o.toString():o;return t||null}function Ct(e,t){return r.a.createElement(g.a,null,t&&t.map((function(a,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{m:1},r.a.createElement(kt,{value:a,property:e,small:!0})),n<t.length-1&&r.a.createElement(V.a,null))})))}function xt(e,t,a){var n;void 0===a&&(a=!1);var i,l=e.urlMediaType||(null===(n=e.storageMeta)||void 0===n?void 0:n.mediaType);if("image"===l)return function(e,t){return r.a.createElement(m.a,{display:"flex",alignItems:"center",justifyContent:"center",width:t?100:200,height:t?100:200},r.a.createElement("img",{src:e,style:{maxWidth:t?100:200,maxHeight:t?100:200}}))}(t,a);if("audio"===l)return i=t,r.a.createElement("audio",{controls:!0,src:i},"Your browser does not support the",r.a.createElement("code",null,"audio")," element.");if("video"===l)return function(e,t){return r.a.createElement(q.a,{style:{maxWidth:t?300:500},component:"video",controls:!0,image:e})}(t,a);throw Error("URL component misconfigured")}function St(e,t){var a=e[t];return r.a.createElement(F.a,{size:"small",key:t,label:r.a.createElement(h.a,{variant:"caption",color:a?"textPrimary":"error"},a||t)})}function It(e){var t=it(),a=r.a.useState([]),i=a[0],l=a[1],o=r.a.useState(),c=o[0],u=o[1],s=r.a.useState(),d=s[0],f=s[1],v=r.a.useState(!1),E=v[0],b=v[1],y=r.a.useState(!1),j=y[0],w=y[1],T=r.a.useState([]),P=T[0],k=T[1],F=r.a.useState(e.initialFilter),V=F[0],q=F[1],L=r.a.useState(),M=L[0],N=L[1],_=r.a.useState(),A=_[0],W=_[1],R=r.a.useState(0),U=R[0],B=R[1],H=r.a.useState([]),z=H[0],G=H[1],Y=r.a.useState(e.paginationEnabled?10:void 0),J=Y[0],K=Y[1];Object(n.useEffect)((function(){var t=z[U];u(!0);var a=function(e,t,a,n,r,i,l,o,c){console.log("Listening collection",e,i,r,l,o,c);var u=Object(he.firestore)().collection(e);return r&&Object.entries(r).filter((function(e){return!!e[1]})).forEach((function(e){var t=e[0],a=e[1],n=a[0],r=a[1];return u=u.where(t,n,r)})),o&&c&&(u=u.orderBy(o,c)),l&&(u=u.startAfter(l)),i&&(u=u.limit(i)),u.onSnapshot((function(e){return a(e.docs.map((function(e){return mt(e,t)})))}),n)}(e.collectionPath,e.schema,(function(e){if(u(!1),f(void 0),e.length){var t=e[e.length-1];z[U+1]=A?t.values[A]:t.snapshot}l(e)}),(function(e){u(!1),f(e)}),V,J,t,A,M);return function(){return a()}}),[e.collectionPath,e.schema,J,U,M,A,z,V]);var X=J?i.length-J:0,Z=ft(e.schema.properties),$=!!e.onEntityEdit,Q=!!e.onEntityDelete,ee=function(t,a){return r.a.createElement(I.a,{key:"row-buttons-"+a},r.a.createElement(m.a,{minWidth:96},$&&r.a.createElement(O.a,{"aria-label":"edit",disabled:!t,onClick:function(a){return t&&function(t,a){e.onEntityEdit&&(t.stopPropagation(),e.onEntityEdit(e.collectionPath,a))}(a,t)}},r.a.createElement(ke.a,{color:"action"})),Q&&r.a.createElement(O.a,{"aria-label":"delete",disabled:!t,onClick:function(a){return t&&function(t,a){e.onEntityDelete&&(t.stopPropagation(),e.onEntityDelete(e.collectionPath,a))}(a,t)}},r.a.createElement(Te.a,null))),r.a.createElement(m.a,{maxWidth:96,component:"div",textAlign:"center",textOverflow:"ellipsis",overflow:"auto"},t?r.a.createElement(h.a,{variant:"caption"}," ",t.id," "):Ot()))};function te(t,a){return r.a.createElement(S.a,{key:"table_"+t.snapshot.id+"_"+a,hover:!0,onClick:function(a){return function(t,a){e.onEntityClick&&(t.stopPropagation(),e.onEntityClick(e.collectionPath,a))}(a,t)},tabIndex:-1},ee(t,a),Z.map((function(e,a){var n=e[0],i=e[1];return function(e,t,a,n){return r.a.createElement(I.a,{key:"table-cell-"+a,component:"th",align:qt(n)},r.a.createElement(kt,{value:t,property:n,small:!1}))}(0,t.values[n],n,i)})),e.additionalColumns&&e.additionalColumns.map((function(e,a){return function(e,t){return r.a.createElement(I.a,{key:"table-additional-"+e,component:"th"},t)}(a,e.builder(t))})))}function ae(t){var a=ee(null,t);return r.a.createElement(S.a,{key:"table_row_skeleton_"+t,tabIndex:-1},a,Z.map((function(e,t){return function(e,t,a){return r.a.createElement(I.a,{key:"table-cell-"+t,component:"th",align:qt(a)},r.a.createElement(yt,{property:a,small:!1}))}(0,e[0],e[1])})),e.additionalColumns&&e.additionalColumns.map((function(e,t){return Ot()})))}var ne=r.a.createElement(x.a,null,[0,1,2,3,4].map((function(e,t){return ae(t)}))),re=r.a.createElement(x.a,null,E&&P.map((function(e,t){return te(e,t)})),!E&&i.map((function(e,t){return te(e,t)})),X>0&&r.a.createElement(S.a,{style:{height:53*X}},r.a.createElement(I.a,{colSpan:Z.length}))),ie=c||j?ne:re,le=!!e.textSearchDelegate;return r.a.createElement(D.a,{component:p.a,elevation:1},e.includeToolbar&&r.a.createElement(Vt,{schema:e.schema,filterValues:V,onTextSearch:le?function(t){try{var a=function(){if(le){var a=function(){w(!1)};w(!0);var n=e.textSearchDelegate,r=function(){if(t)return b(!0),Promise.resolve(n.performTextSearch(t)).then((function(t){var a=t.map((function(t){return st(e.collectionPath,t,e.schema)}));return Promise.resolve(Promise.all(a)).then((function(e){k(e)}))}));k([]),b(!1)}();return r&&r.then?r.then(a):a()}}();return Promise.resolve(a&&a.then?a.then((function(){})):void 0)}catch(n){return Promise.reject(n)}}:void 0,collectionPath:e.collectionPath,onFilterUpdate:function(e){q(e)}}),d&&r.a.createElement(m.a,{m:5},r.a.createElement(g.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(g.a,{container:!0,justify:"center"},r.a.createElement(h.a,{variant:"h6",color:"error"},d.name)),r.a.createElement(g.a,{container:!0,justify:"center"},r.a.createElement(h.a,{color:"error"},d.message)))),!d&&r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(C.a,{stickyHeader:!0,className:t.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Ft,{classes:t,schema:e.schema,order:M,orderBy:A,sortable:!P.length,additionalColumns:e.additionalColumns,onRequestSort:function(e,t){B(0),G([]);var a=A===t&&"asc"===M;N(A===t&&"desc"===M?"asc":a?void 0:"desc"),W(a?void 0:t)}}),ie)),e.paginationEnabled&&!E&&J&&r.a.createElement(ye.a,{rowsPerPageOptions:[5,10,25],component:"div",count:1/0,rowsPerPage:J,page:U,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:function(e,t){B(t)},onChangeRowsPerPage:function(e){K(parseInt(e.target.value,10)),B(0)}}))}function Ft(e){var t=e.classes,a=e.order,n=e.orderBy,i=e.sortable,l=e.onRequestSort,o=e.schema,c=e.additionalColumns,u=ft(o.properties).map((function(e,t){var a=e[0],n=e[1];return{index:t,id:a,align:qt(n),label:n.title||a}}));return r.a.createElement(be.a,null,r.a.createElement(S.a,null,r.a.createElement(I.a,{key:"header-id",align:"center",padding:"default"},"Id"),u.map((function(e){var o,c=i&&n===e.id;return r.a.createElement(I.a,{key:e.id,align:e.align,padding:"default",sortDirection:!!c&&a},r.a.createElement(je.a,{active:c,direction:a,onClick:(o=e.id,function(e){l(e,o)})},e.label,c?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"Sorted descending":"asc"===a?"Sorted ascending":""):null))})),c&&c.map((function(e,t){return r.a.createElement(I.a,{key:"head-additional-"+t,align:"left",padding:"default"},e.title)}))))}function Vt(e){var t=ot(),a=vt(e.schema.properties);return r.a.createElement(ae.a,{className:t.root},r.a.createElement(g.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(g.a,{item:!0},r.a.createElement(m.a,{className:t.title},r.a.createElement(h.a,{variant:"h6"},"All ",e.schema.name),r.a.createElement(h.a,{variant:"caption"},e.collectionPath))),r.a.createElement(g.a,{item:!0},e.onTextSearch&&r.a.createElement(m.a,{className:t.searchBar},r.a.createElement(bt,{onTextSearch:e.onTextSearch}))),r.a.createElement(g.a,{item:!0},e.onFilterUpdate&&a.length>0&&r.a.createElement(ht,{schema:e.schema,filterValues:e.filterValues,onFilterUpdate:e.onFilterUpdate}))))}function qt(e){return"number"===e.dataType||"timestamp"===e.dataType?"right":"left"}var Dt;function Lt(e,t){var a=t;return Object.entries(e).forEach((function(e){var t=e[0],n=e[1];return a=a.replace(":"+t,n)})),a}function Mt(e,t){return Ue()(ct({basePath:e},t)).slice(0,10)}function Nt(e,t){return"/c/"+t+"/"+e}function _t(e){return"/c/"+e+"/new"}function At(e){return"/c/"+Wt(e)}function Wt(e){return e.startsWith("/")?e.slice(1):e}function Rt(e){return e.startsWith("/")?e:"/"+e}function Ut(e){var t=e.entity,a=e.schema;return Object(n.createElement)(D.a,null,Object(n.createElement)(C.a,{"aria-label":"simple table"},Object(n.createElement)(x.a,null,Object(n.createElement)(S.a,{key:"entity_prev_id"},Object(n.createElement)(I.a,{align:"right",component:"th",scope:"row"},"Id"),Object(n.createElement)(I.a,null,t.id)),Object.entries(a.properties).map((function(e){var a=e[0],r=e[1];return Object(n.createElement)(S.a,{key:"entity_prev"+r.title+a},Object(n.createElement)(I.a,{align:"right",component:"th",scope:"row"},r.title),Object(n.createElement)(I.a,null,Object(n.createElement)(kt,{value:t.values[a],property:r,small:!1})))})))))}function Bt(e){var t=e.entity,a=e.schema,i=e.onClose,l=e.open,o=ut(e,["entity","schema","onClose","open"]),c=Object(n.useState)(!1),u=c[0],s=c[1],m=r.a.useState(!1),d=m[0],p=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"md",keepMounted:!0,"aria-labelledby":"confirmation-dialog-title",open:l,onBackdropClick:i},o),r.a.createElement(J.a,{id:"confirmation-dialog-title"},"Would you like to delete this ",a.name,"?"),r.a.createElement(L.a,{dividers:!0},t&&r.a.createElement(Ut,{entity:t,schema:a})),u&&r.a.createElement(nt,null),!u&&r.a.createElement(K.a,null,r.a.createElement(T.a,{autoFocus:!0,onClick:function(){i()},color:"primary"},"Cancel"),r.a.createElement(T.a,{onClick:function(){t&&(p(!0),s(!0),function(e){return console.debug("Deleting entity",e),e.reference.delete()}(t).then((function(e){return s(!1)})),i())},color:"primary"},"Ok"))),r.a.createElement(M.a,{open:d,autoHideDuration:3e3,onClose:function(e){return p(!1)}},r.a.createElement(He.a,{elevation:6,variant:"filled",onClose:function(e){return p(!1)}},"Deleted")))}function Ht(e){var t=e.entity,a=e.schema,n=e.onClose,i=e.open,l=ut(e,["entity","schema","onClose","open"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"md",keepMounted:!0,"aria-labelledby":"confirmation-dialog-title",onBackdropClick:n,open:i},l),r.a.createElement(J.a,{id:"confirmation-dialog-title"},a.name),r.a.createElement(L.a,{dividers:!0},t&&r.a.createElement(Ut,{entity:t,schema:a})),r.a.createElement(K.a,null,r.a.createElement(T.a,{onClick:n,color:"primary"},"Ok"))))}function zt(e){var t,a=e.view,n=e.entityPlaceholderPath,i=e.match,l=e.history;if(!i)throw Error("No match prop for some reason");t=Lt(i.params,n);var o=r.a.useState(void 0),c=o[0],u=o[1],s=r.a.useState(void 0),d=s[0],p=s[1];var f=void 0===a.deleteEnabled||a.deleteEnabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{mb:3},r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:6},r.a.createElement(rt,null,r.a.createElement(N.a,{"aria-label":"breadcrumb"},r.a.createElement(_.a,{color:"inherit",component:ve.b,to:"/"},"Home"),r.a.createElement(h.a,{color:"textPrimary"},a.schema.name)))),r.a.createElement(g.a,{item:!0,xs:6},r.a.createElement(m.a,{textAlign:"right"},r.a.createElement(T.a,{component:ve.b,to:_t(t),size:"large",variant:"contained",color:"primary"},"Add ",a.schema.name))))),r.a.createElement(m.a,{mb:3},r.a.createElement(h.a,{variant:"h5"},a.schema.name," List")),r.a.createElement(It,{collectionPath:a.relativePath,schema:a.schema,textSearchDelegate:a.textSearchDelegate,includeToolbar:!0,onEntityEdit:function(e,t){var a=Nt(t.id,e);l.push(a)},onEntityClick:function(e,t){u(t)},onEntityDelete:f?function(e,t){p(t)}:void 0,additionalColumns:a.additionalColumns,paginationEnabled:void 0===a.pagination||a.pagination}),c&&r.a.createElement(Ht,{entity:c,schema:a.schema,open:!!c,onClose:function(){return u(void 0)}}),d&&r.a.createElement(Bt,{entity:d,schema:a.schema,open:!!d,onClose:function(){return p(void 0)}}))}function Gt(e){var t,a=e.field,n=e.form,i=n.errors,l=n.touched,o=n.setFieldValue,c=e.property,u=e.includeDescription,s=ut(e,["field","form","property","createFormField","includeDescription"]),m=c.enumValues,d=Object(Ve.f)(i,a.name),p=Object(Ve.f)(l,a.name)&&!!d,f=a.value;return r.a.createElement(E.a,{fullWidth:!0,required:null===(t=c.validation)||void 0===t?void 0:t.required,error:p},r.a.createElement(A.a,{id:a.name+"-label"},c.title||a.name),r.a.createElement(b.a,Object.assign({labelId:a.name+"-label",value:f||"",onChange:function(e){var t=e.target.value;return o(a.name,t||null)}},s),Object.entries(m).map((function(e){var t=e[0],a=e[1];return r.a.createElement(y.a,{key:"select-"+t,value:t},a)}))),u&&c.description&&r.a.createElement(W.a,null,c.description),p&&r.a.createElement(W.a,{id:"component-error-text"},d))}function Yt(e){var t,a=e.field,n=e.form,i=n.errors,l=n.touched,o=n.setFieldValue,c=e.property;if("string"!==c.of.dataType&&"number"!==c.of.dataType)throw Error("Field misconfiguration: array field of type string or number");var u=c.of.enumValues;if(!u)throw console.error(c),Error("Field misconfiguration: array field of type string or number needs to have enumValues");var s=Object(Ve.f)(i,a.name),m=Object(Ve.f)(l,a.name)&&!!s;return r.a.createElement(E.a,{fullWidth:!0,required:null===(t=c.validation)||void 0===t?void 0:t.required,error:m},r.a.createElement(A.a,{id:a.name+"-label"},c.title||a.name),r.a.createElement(b.a,{multiple:!0,labelId:a.name+"-label",value:a.value?a.value:[],onChange:function(e){return o(""+a.name,e.target.value)},renderValue:function(e){return r.a.createElement("div",null,e.map((function(e){return St(u,e)})))}},Object.keys(u).map((function(e){return r.a.createElement(y.a,{key:e,value:e},r.a.createElement(R.a,{checked:!!a.value&&a.value.indexOf(e)>-1}),r.a.createElement(U.a,{primary:u[e]}))}))),r.a.createElement(W.a,null,s))}function Jt(e){var t,a,r=e.field,i=e.form,l=i.errors,o=i.touched,c=i.setFieldValue,u=e.property,s=e.includeDescription,m=Object(Ve.f)(l,r.name),d=Object(Ve.f)(o,r.name)&&!!m,p="array"===u.dataType?Array.isArray(r.value)?r.value:[]:r.value;return Object(n.createElement)(E.a,{fullWidth:!0,required:null===(t=u.validation)||void 0===t?void 0:t.required,error:d},Object(n.createElement)(W.a,{filled:!0,required:null===(a=u.validation)||void 0===a?void 0:a.required},u.title||r.name),Object(n.createElement)(Kt,{value:p,property:u,onChange:function(e){return c(r.name,e)}}),s&&u.description&&Object(n.createElement)(W.a,null,u.description),d&&Object(n.createElement)(W.a,{id:"component-error-text"},m))}function Kt(e){var t=e.property,a=e.value,r=e.onChange,i="array"===t.dataType;if(i&&"string"!==t.of.dataType)throw Error("Storage field using array must be of data type string");var l="string"===t.dataType?t.storageMeta:"array"===t.dataType?t.of.storageMeta:void 0;if(!l)throw Error("Storage meta must be specified");var o=lt(),c=i?a.map((function(e){return{storagePath:e}})):[{storagePath:a}],u=Object(n.useState)(c),s=u[0],d=u[1];function f(e){return e.filter((function(t,a){return(e.map((function(e){return e.storagePath})).indexOf(t.storagePath)===a||!t.storagePath)&&(e.map((function(e){return e.file})).indexOf(t.file)===a||!t.file)}))}var v=function(e){if(i){var t=s.filter((function(t){return t.storagePath!==e}));r(t.filter((function(e){return!!e.storagePath})).map((function(e){return e.storagePath}))),d(t)}else r(null),d([])},E=Object(ze.a)({accept:l.acceptedFiles,onDrop:function(e){var t;t=f(t=i?[].concat(s,e.map((function(e){return{file:e}}))):[{file:e[0]}]),d(t)}}),g=E.getRootProps,b=E.getInputProps,y=E.isDragActive,j=E.isDragAccept,w=E.isDragReject,O=g(),T=O.ref,P=ut(O,["ref"]);return Object(n.createElement)(B.a,{rootRef:T},Object(n.createElement)(p.a,Object.assign({elevation:0},P,{className:o.dropZone+" "+(y?o.activeDrop:"")+" "+(w?o.rejectDrop:"")+" "+(j?o.acceptDrop:""),variant:"outlined"}),Object(n.createElement)("input",Object.assign({},b())),Object(n.createElement)(m.a,{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",minHeight:220},s.map((function(e){if(e.storagePath){var a=i?t.of:t;return Object(n.createElement)(Zt,{key:"storage_preview_"+e.storagePath,property:a,value:e.storagePath,onClear:v})}return e.file?Object(n.createElement)(Xt,{key:"storage_upload_"+e.file.name,file:e.file,storagePath:l.storagePath,onFileUploadComplete:function(e,t){!function(e,t){console.log("onFileUploadComplete",e,t);var a,n=s.find((function(a){return a.file===t||a.storagePath===e}));n?(n.storagePath=e,n.file=t,a=[].concat(s)):(n={storagePath:e,file:t},a=i?[].concat(s,[n]):[n]),a=f(a),d(a);var l=a.filter((function(e){return!!e.storagePath})).map((function(e){return e.storagePath}));r(i?l:l?l[0]:null)}(e,t)}}):null})),Object(n.createElement)(m.a,{flexGrow:1,m:2},Object(n.createElement)(h.a,{color:"textSecondary",variant:"body2",align:"center"},"Drag 'n' drop some files here, or click to select files")))))}function Xt(e){var t=e.storagePath,a=e.file,r=e.onFileUploadComplete,i=lt(),l=Object(n.useState)(),o=l[0],c=l[1],u=Object(n.useState)(-1),s=u[0],d=u[1],f=Object(n.useState)(!1),v=f[0],E=f[1];Object(n.useEffect)((function(){a&&function(e){c(void 0),d(0);var a=pt(e,t);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(d(t),console.debug("Upload is "+t+"% done"),e.state){case ge.a.storage.TaskState.PAUSED:console.debug("Upload is paused");break;case ge.a.storage.TaskState.RUNNING:console.debug("Upload is running")}}),(function(e){console.error("Upload error",e),c(e.message),d(-1),E(!0)}),(function(){var t=a.snapshot.ref.fullPath;d(-1),r(t,e)}))}(a)}),[]);var h=function(e,t){E(!1)};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(m.a,{ml:2,mt:2,mb:2},Object(n.createElement)(p.a,{elevation:0,className:i.uploadItem,variant:"outlined"},s>-1&&Object(n.createElement)(H.a,{variant:"indeterminate",value:s}),o&&Object(n.createElement)("p",null,"Error uploading file: ",o))),Object(n.createElement)(M.a,{open:v,autoHideDuration:3e3,onClose:h},Object(n.createElement)(He.a,{elevation:6,variant:"filled",onClose:h,severity:"error"},o)))}function Zt(e){var t=e.property,a=e.value,r=e.onClear,i=lt();return Object(n.createElement)(m.a,{ml:2,mt:2,mb:2,position:"relative"},Object(n.createElement)(p.a,{elevation:0,className:i.uploadItem,variant:"outlined"},Object(n.createElement)(m.a,{position:"absolute",top:4,right:4},Object(n.createElement)(O.a,{style:{backgroundColor:"white"},onClick:function(e){e.stopPropagation(),r(a)}},Object(n.createElement)(De.a,{fontSize:"small"}))),a&&Object(n.createElement)(kt,{value:a,property:t,small:!1})))}function $t(e){var t,a,n=e.field,i=e.form,l=i.isSubmitting,o=i.errors,c=i.touched,u=i.setFieldValue,s=e.property,d=e.includeDescription,p=e.allowInfinity,f=ut(e,["field","form","property","includeDescription","allowInfinity","createFormField"]),v=Object(Ve.f)(o,n.name),g=Object(Ve.f)(c,n.name)&&!!v;"string"===s.dataType&&(a=s.urlMediaType);var b=n.value?n.value:"",y=function(e){if(e)if("number"===O){var t=parseFloat(e);u(n.name,t)}else u(n.name,e);else u(n.name,null)},w=b===1/0,O=w||"number"!==s.dataType?void 0:"number";return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{required:null===(t=s.validation)||void 0===t?void 0:t.required,error:g,disabled:l,fullWidth:!0},r.a.createElement(A.a,null,s.title||n.name),r.a.createElement(j.a,Object.assign({type:O,value:w?"Infinity":b},f,{disabled:w,onChange:function(e){y(e.target.value)}})),p&&r.a.createElement(z.a,{checked:w,labelPlacement:"start",control:r.a.createElement(G.a,{size:"small",type:"checkbox",onChange:function(e){y(e.target.checked?1/0:void 0)}}),disabled:s.disabled||l,label:r.a.createElement(h.a,{variant:"caption"},"Set value to Infinity")}),g&&r.a.createElement(W.a,{id:"component-error-text"},v),d&&s.description&&r.a.createElement(W.a,null,s.description)),a&&b&&r.a.createElement(m.a,{m:1},r.a.createElement(kt,{value:b,property:s,small:!1})))}function Qt(e){var t=e.field,a=e.form,n=a.isSubmitting,i=a.errors,l=a.touched,o=a.setFieldValue,c=e.property,u=e.includeDescription,s=ut(e,["field","form","property","includeDescription","createFormField"]),m=Object(Ve.f)(i,t.name),d=Object(Ve.f)(l,t.name)&&!!m;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{checked:t.value,control:r.a.createElement(G.a,Object.assign({},s,{type:"checkbox",onChange:function(e){o(t.name,e.target.checked)}})),disabled:c.disabled||n,label:c.title||t.name}),u&&c.description&&r.a.createElement(W.a,null,c.description),d&&r.a.createElement(W.a,{id:"component-error-text"},m))}function ea(e){var t=e.field,a=e.form,n=a.isSubmitting,i=a.errors,l=a.touched,o=a.setFieldValue,c=e.property,u=ut(e,["field","form","property","createFormField","includeDescription"]),s=Object(Ve.f)(i,t.name),m=Object(Ve.f)(l,t.name)&&!!s,d=t.value;return r.a.createElement(ce.a,Object.assign({fullWidth:!0,clearable:!0,value:d,label:c.title||t.name,error:m,disabled:void 0!==c.disabled?c.disabled:n,helperText:m?s:c.description,onChange:function(e){return o(t.name,e)}},u))}function ta(e){var t=e.builder,a=Object(n.useState)(!0),r=a[0],i=a[1],l=Object(n.useState)(null),o=l[0],c=l[1];return Object(n.useEffect)((function(){t.then((function(e){i(!1),c(e)})).catch((function(e){i(!1),console.error(e)}))}),[t]),r?Object(n.createElement)(nt,null):Object(n.createElement)(n.Fragment,null,o)}!function(e){e.new="new",e.existing="existing"}(Dt||(Dt={}));function aa(e){var t=e.field,a=e.form,n=a.errors,i=a.touched,l=a.setFieldValue,o=e.property,c=e.includeDescription,u=Object(Ve.f)(n,t.name),s=Object(Ve.f)(i,t.name)&&!!u,d=t.value,f=lt(),v=o.title||t.name;return r.a.createElement(E.a,{error:s,fullWidth:!0},r.a.createElement(p.a,{elevation:0,className:f.paper,variant:"outlined"},r.a.createElement(m.a,{my:1},r.a.createElement(h.a,{variant:"caption",display:"block",gutterBottom:!0},v)),r.a.createElement(na,{value:d,title:v,collectionPath:o.collectionPath,schema:o.schema,initialFilter:o.filter,onEntityClick:function(e){var a=e?e.reference:null;l(t.name,a)}})),c&&o.description&&r.a.createElement(m.a,null,r.a.createElement(W.a,null,o.description)),s&&r.a.createElement(W.a,{id:"component-error-text"},u))}function na(e){var t=e.onEntityClick,a=e.value,n=e.title,i=e.schema,l=e.initialFilter,o=e.collectionPath,c=r.a.useState(!1),u=c[0],s=c[1],d=function(){s(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{justify:"space-between",container:!0,spacing:2},r.a.createElement(g.a,{item:!0},a&&r.a.createElement(Pt,{reference:a,schema:i,previewComponent:kt}),!a&&r.a.createElement(m.a,null,"No value set")),r.a.createElement(m.a,{display:"inline"},a&&r.a.createElement(w.a,{title:"Clear"},r.a.createElement(O.a,{"aria-label":"clear",onClick:function(){s(!1),t(void 0)}},r.a.createElement(Ye.a,null))),r.a.createElement(T.a,{variant:"outlined",color:"primary",onClick:function(){s(!0)}},a?"Edit":"Set"))),r.a.createElement(Y.a,{onClose:d,maxWidth:"xl",open:u},r.a.createElement(J.a,null,"Select ",n),r.a.createElement(It,{collectionPath:o,schema:i,includeToolbar:!1,onEntityClick:function(e,a){s(!1),t(a)},paginationEnabled:!1,initialFilter:l}),r.a.createElement(K.a,null,r.a.createElement(T.a,{autoFocus:!0,onClick:d,color:"primary"},"Close"))))}function ra(e){var t,a,n=e.field,i=e.form.touched,l=e.property,o=e.includeDescription,c=e.createFormField,u=(ut(e,["field","form","property","includeDescription","createFormField"]),lt()),s=l.properties,d=i&&(null===(t=l.validation)||void 0===t?void 0:t.required)&&!n.value;return r.a.createElement(E.a,{fullWidth:!0,error:d},r.a.createElement(W.a,{filled:!0,required:null===(a=l.validation)||void 0===a?void 0:a.required},l.title||n.name),r.a.createElement(p.a,{elevation:0,variant:"outlined",className:u.paper},r.a.createElement(m.a,{m:1},r.a.createElement(g.a,{container:!0,spacing:1},Object.entries(s).map((function(e,t){var a=e[0],i=e[1];return r.a.createElement(g.a,{item:!0,xs:12,key:"map-"+n.name+"-"+t},c(n.name+"["+a+"]",i,o))}))))),o&&l.description&&r.a.createElement(W.a,null,l.description))}function ia(e){var t=e.field,a=e.form,n=a.errors,i=a.touched,l=e.property,o=e.createFormField,c=e.includeDescription,u=lt(),s=l.of,d=t.value&&t.value.length>0,f=Object(Ve.f)(n,t.name),v=Object(Ve.f)(i,t.name)&&!!f;return r.a.createElement(Ve.c,{name:t.name,render:function(e){var a;return r.a.createElement(E.a,{fullWidth:!0,error:v},r.a.createElement(W.a,{filled:!0,required:null===(a=l.validation)||void 0===a?void 0:a.required},l.title||t.name),r.a.createElement(p.a,{variant:"outlined",className:u.paper},d?r.a.createElement(r.a.Fragment,null,t.value.map((function(a,n){return r.a.createElement(m.a,{key:"field_"+n,mb:1,display:"flex"},r.a.createElement(m.a,{flexGrow:1,key:"field_"+t.name+"_entryValue"},o(t.name+"["+n+"]",s,c)),r.a.createElement(m.a,null,r.a.createElement(O.a,{"aria-label":"remove",onClick:function(){return e.remove(n)}},r.a.createElement(Je.a,null))),r.a.createElement(m.a,null,r.a.createElement(O.a,{"aria-label":"insert",onClick:function(){return e.insert(n+1,void 0)}},r.a.createElement(Ke.a,null))))}))):r.a.createElement(m.a,{margin:2},r.a.createElement(T.a,{onClick:function(){return e.push(null)}},"Add"))),c&&l.description&&r.a.createElement(m.a,null,r.a.createElement(W.a,null,l.description)),v&&r.a.createElement(W.a,{id:"component-error-text"},f))}})}function la(e){var t=e.field,a=e.form,n=a.errors,i=a.touched,l=e.property,o=e.createFormField,c=e.includeDescription;if("map"!==l.of.dataType)throw console.error(l),Error("Field misconfiguration: this array field should have type map");var u=lt(),s=l.of.properties,d=Object(Ve.f)(n,t.name),f=Object(Ve.f)(i,t.name)&&!!d;return r.a.createElement(Ve.c,{name:t.name,render:function(e){var a,n,v=t.value&&t.value.length>0,h=i&&(null===(a=l.validation)||void 0===a?void 0:a.required)&&!t.value;return r.a.createElement(E.a,{fullWidth:!0,error:h},r.a.createElement(W.a,{filled:!0,required:null===(n=l.validation)||void 0===n?void 0:n.required},l.title||t.name),r.a.createElement(p.a,{elevation:0,className:u.paper},v?r.a.createElement(C.a,null,r.a.createElement(x.a,null,t.value.map((function(a,n){return r.a.createElement(S.a,{key:"field_"+n},Object.entries(s).map((function(e){var a=e[0],i=e[1];return r.a.createElement(I.a,{key:"field_"+a},o(t.name+"["+n+"]."+a,i,c))})),r.a.createElement(I.a,{size:"small",padding:"none"},r.a.createElement(O.a,{"aria-label":"remove",onClick:function(){return e.remove(n)}},r.a.createElement(Je.a,null))),r.a.createElement(I.a,{size:"small",padding:"none"},r.a.createElement(O.a,{"aria-label":"insert",onClick:function(){return e.insert(n+1,{})}},r.a.createElement(Ke.a,null))))})))):r.a.createElement(m.a,{margin:2},r.a.createElement(T.a,{onClick:function(){return e.push(null)}},"Add"))),c&&l.description&&r.a.createElement(m.a,null,r.a.createElement(W.a,null,l.description)),f&&r.a.createElement(W.a,{id:"component-error-text"},d))}})}function oa(e){var t,a=e.field,n=e.property,i=e.includeDescription,l=lt();return r.a.createElement(E.a,{fullWidth:!0,disabled:!0},r.a.createElement(W.a,{filled:!0,required:null===(t=n.validation)||void 0===t?void 0:t.required},n.title||a.name),r.a.createElement(p.a,{elevation:0,className:l.paper,variant:"outlined"},a.value&&r.a.createElement(kt,{value:a.value,property:n,small:!1}),!a.value&&r.a.createElement(m.a,{m:1},"No value set")),i&&n.description&&r.a.createElement(W.a,null,n.description))}function ca(e,t,a){return t.disabled?ua(e,t,a,oa):(t.customField?n=t.customField:"array"===t.dataType?n="string"!==t.of.dataType&&"number"!==t.of.dataType||!t.of.enumValues?"string"===t.of.dataType&&t.of.storageMeta?Jt:"map"===t.of.dataType?la:ia:Yt:"map"===t.dataType?n=ra:"reference"===t.dataType?n=aa:"timestamp"===t.dataType?n=ea:"boolean"===t.dataType?n=Qt:"number"===t.dataType?n=t.enumValues?Gt:$t:"string"===t.dataType&&(n=t.storageMeta?Jt:t.enumValues?Gt:$t),n?ua(e,t,a,n,t.additionalProps):r.a.createElement("div",null,"Currently the field "+t.dataType+" is not supported"));var n}function ua(e,t,a,n,i){var l;return r.a.createElement(Ve.b,{required:null===(l=t.validation)||void 0===l?void 0:l.required,name:""+e},(function(e){return r.a.createElement(n,ct({},e,{},i,{includeDescription:a,property:t,createFormField:ca}))}))}function sa(e){if("string"===e.dataType)return function(e){var t=Object(Xe.f)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);e.enumValues&&(t=t.oneOf(Object.keys(e.enumValues)));return t}(e);if("number"===e.dataType)return function(e){var t=e.validation,a=Object(Xe.d)().typeError((null===t||void 0===t?void 0:t.requiredMessage)?null===t||void 0===t?void 0:t.requiredMessage:"Must be a number");a=(null===t||void 0===t?void 0:t.required)?a.required(t.requiredMessage).nullable(!1):a.notRequired().nullable(!0);return a}(e);if("boolean"===e.dataType)return function(e){var t=Object(Xe.b)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);if("map"===e.dataType)return ma(e.properties);if("array"===e.dataType)return function(e){var t=Object(Xe.a)().of(sa(e.of)),a=e.validation;(null===a||void 0===a?void 0:a.required)&&(t=t.required(a.requiredMessage).nullable(!1));return t}(e);if("timestamp"===e.dataType)return function(e){var t=Object(Xe.c)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);if("geopoint"===e.dataType)return function(e){var t=Object(Xe.e)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);if("reference"===e.dataType)return function(e){var t=Object(Xe.e)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);throw Error("Unsupported data type in yup mapping")}function ma(e){var t={};return Object.entries(e).forEach((function(e){var a=e[0],n=e[1];t[a]=sa(n)})),Object(Xe.e)().shape(t)}function da(e){var t,a=e.status,n=e.collectionPath,i=e.schema,l=e.entity,o=e.onEntitySave,c=lt(),u=r.a.useState(void 0),s=u[0],d=u[1],f=r.a.useState(!1),v=f[0],h=f[1],j=r.a.useState(),w=j[0],O=j[1],P=a===Dt.new&&!!i.customId;if(a===Dt.new)t=dt(i);else{if(a!==Dt.existing||!l)throw new Error("Form configured wrong");t=l.values}return r.a.createElement(Ve.e,{initialValues:t,validate:function(e){return console.debug("validate",e)},onSubmit:function(e,t){if(P&&!s)return console.error("Missing custom Id"),h(!0),void t.setSubmitting(!1);var r;if(O(null),h(!1),a===Dt.existing){if(!(null===l||void 0===l?void 0:l.id))throw Error("Form misconfigured when saving, no id for existing entity");r=l.id}else{if(a!==Dt.new)throw Error("New FormType added, check EntityForm");if(i.customId){if(!s)throw Error("Form misconfigured when saving, customId should be set");r=s}}o(n,r,e).catch((function(e){console.error(e),O(e)})).finally((function(){t.setSubmitting(!1)}))},validationSchema:ma(i.properties)},(function(e){var t=e.handleSubmit,n=e.isSubmitting;return r.a.createElement(p.a,{elevation:1},r.a.createElement(Z.a,{maxWidth:"md",className:c.formPaper,disableGutters:!0},r.a.createElement(m.a,{margin:1},function(e,t,a,n,i){var l=t!==Dt.new||!e.customId,o="object"===typeof e.customId,c={label:t===Dt.new&&l?"Id is set automatically":"Id",disabled:l,name:"id",type:null,value:i,variant:"outlined"};return r.a.createElement(E.a,Object.assign({fullWidth:!0,error:n},c),o&&e.customId&&r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{id:"id-label"},c.label),r.a.createElement(b.a,Object.assign({labelId:"id-label",error:n},c,{onChange:function(e){return a(e.target.value)}}),Object.entries(e.customId).map((function(e){var t=e[0],a=e[1];return r.a.createElement(y.a,{value:t},t+" - "+a)})))),!o&&r.a.createElement(X.a,Object.assign({},c,{error:n,onChange:function(e){return a(e.target.value)}})),r.a.createElement(Ve.a,{name:"id",component:"div"},(function(e){return"You need to specify an ID"})))}(i,a,d,v,null===l||void 0===l?void 0:l.id)),r.a.createElement(Ve.d,{className:c.form,onSubmit:t,noValidate:!0},r.a.createElement(m.a,{padding:1},r.a.createElement(g.a,{container:!0,spacing:3},function(e){return r.a.createElement(r.a.Fragment,null,Object.entries(e.properties).map((function(t){var a=t[0],n=t[1],i=ca(a,n,!0);return"array"===n.dataType&&"map"===n.of.dataType||"array"===n.dataType&&"string"===n.of.dataType&&n.of.storageMeta||"string"===n.dataType&&n.storageMeta?r.a.createElement(g.a,{item:!0,xs:12,key:"field_"+e.name+"_"+a},i):r.a.createElement(g.a,{item:!0,xs:12,sm:6,key:"field_"+e.name+"_"+a},i)})))}(i))),w&&r.a.createElement(m.a,{textAlign:"right"},w),r.a.createElement(m.a,{textAlign:"right"},a===Dt.existing&&r.a.createElement(T.a,{variant:"text",color:"primary",disabled:n,className:c.button,type:"reset"},"Discard"),r.a.createElement(T.a,{variant:"contained",color:"primary",type:"submit",disabled:n,className:c.button},"Save")))))}))}function pa(e){var t=e.subcollectionPath,a=e.selectedView,n=e.thisView,i=e.onEntityClick,l=(ut(e,["subcollectionPath","selectedView","thisView","onEntityClick"]),r.a.useState(void 0)),o=l[0],c=l[1],u=void 0!==n.deleteEnabled||n.deleteEnabled;return r.a.createElement(g.a,{hidden:a!==n},t?r.a.createElement(It,{collectionPath:t,onEntityDelete:u?function(e,t){c(t)}:void 0,schema:n.schema,onEntityEdit:i,includeToolbar:!1,paginationEnabled:!1,additionalColumns:n.additionalColumns}):r.a.createElement(g.a,{container:!0},r.a.createElement(m.a,{m:3},"You need to save your entity before adding additional collections")),r.a.createElement(Bt,{entity:o,schema:n.schema,open:!!o,onClose:function(){return c(void 0)}}))}function fa(e){var t=e.parentCollectionPath,a=e.subcollections,n=e.entity,i=e.onEntityClick;if(!a)throw Error("Subcollection view must use a schema with subcollection entries");var l=Object.values(a)[0],o=r.a.useState(l),c=o[0],u=o[1];var s=void 0;return n&&(s=t+"/"+n.id+"/"+c.relativePath),r.a.createElement(p.a,{elevation:0},r.a.createElement($.a,{position:"static",color:"transparent",elevation:0},r.a.createElement(g.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end"},r.a.createElement(Q.a,{value:c,onChange:function(e,t){u(t)}},Object.entries(a).map((function(e){var t=e[0],a=e[1];return r.a.createElement(ee.a,{label:a.name,value:a,key:"wrapped-tab-"+t})}))),r.a.createElement(m.a,{m:1,textAlign:"right"},s&&r.a.createElement(T.a,{component:ve.b,to:_t(s),size:"medium",variant:"outlined",color:"primary"},"Add ",c.schema.name)))),Object.entries(a).map((function(e){var t=e[0],a=e[1];return r.a.createElement(pa,{key:"wrapped-tab-content-"+t,selectedView:c,thisView:a,onEntityClick:i,subcollectionPath:s})})))}function va(e){var t,a,i,l=e.view,o=e.entityPlaceholderPath,c=e.breadcrumbs,u=e.match,s=e.history,d=(ut(e,["view","entityPlaceholderPath","breadcrumbs","match","history"]),Mt(o,l));i=u.params,a=Lt(i,o),t=i[d];var p=Object(n.useState)(),f=p[0],v=p[1],E=Object(n.useState)(),g=E[0],b=E[1],y=Object(n.useState)(!0),j=y[0],w=y[1];Object(n.useEffect)((function(){t?st(a,t,l.schema).then((function(e){b(Dt.existing),v(e)})).finally((function(){return w(!1)})):(b(Dt.new),w(!1))}),[a,t,l]);s.listen((function(e){}));var O=function(e,t){C(!1)},T=function(e,t){I(void 0)},P=r.a.useState(!1),k=P[0],C=P[1],x=r.a.useState(void 0),S=x[0],I=x[1];var F=g===Dt.existing,V=r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{mb:3},r.a.createElement(rt,null,r.a.createElement(N.a,{"aria-label":"breadcrumb"},r.a.createElement(_.a,{key:"breadcrumb-home",color:"inherit",component:ve.b,to:"/"},"Home"),c.map((function(e){return e.placeHolderId&&!i[e.placeHolderId]?null:r.a.createElement(_.a,{key:"breadcrumb-"+e.entityPlaceholderPath,color:"inherit",component:ve.b,to:At(Lt(i,e.entityPlaceholderPath))},e.placeHolderId?i[e.placeHolderId]:e.view.name)})).filter((function(e){return!!e})),r.a.createElement(h.a,{color:"textPrimary"},F?"Edit":"Add New")))),r.a.createElement(m.a,{mb:3},r.a.createElement(h.a,{variant:"h5"},F?"Edit":"Add New"," ",l.schema.name)),r.a.createElement(da,{status:g,collectionPath:a,schema:l.schema,onEntitySave:function(e,a,n){return function(e,t,a){var n;return console.log("Saving entity",e,t,a),(n=t?Object(he.firestore)().collection(e).doc(t):Object(he.firestore)().collection(e).doc()).set(a,{merge:!0}).then((function(){return n.id}))}(e,a,n).then((function(t){C(!0),g===Dt.new&&(w(!0),v(void 0),b(void 0),s.replace(Nt(t,e)))})).catch((function(a){I(a),console.error("Error saving entity",e,t,n),console.error(a)}))},entity:f}),l.subcollections&&r.a.createElement(fa,{parentCollectionPath:a,subcollections:l.subcollections,entity:f,onEntityClick:function(e,t){var a=Nt(t.id,e);s.push(a)}}));return r.a.createElement(r.a.Fragment,null,j?r.a.createElement(nt,null):V,r.a.createElement(M.a,{open:k,autoHideDuration:3e3,onClose:O},r.a.createElement(He.a,{elevation:6,variant:"filled",onClose:O,severity:"success"},"The item has been saved correctly")),r.a.createElement(M.a,{open:!!S,autoHideDuration:3e3,onClose:T},r.a.createElement(He.a,{elevation:6,variant:"filled",onClose:T,severity:"error"},r.a.createElement(m.a,null,"Error saving"),r.a.createElement(m.a,null,null===S||void 0===S?void 0:S.message))))}function Ea(){var e=it(),t={full_path:"",name:"Root",children:[],ref:Object(he.storage)().ref()},a=Object(n.useState)({"":t})[0];return r.a.createElement(Ze.a,{className:e.tree,defaultCollapseIcon:r.a.createElement(et.a,null),defaultExpandIcon:r.a.createElement(at.a,null),onNodeToggle:function(e,t){}},function e(t){return r.a.createElement($e.a,{nodeId:t.full_path,label:t.name},t.children.map((function(t){return e(t)})))}(a[""]))}function ha(e){ct({},e);var t=lt(),a=Object(n.useState)([])[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:12,sm:3},r.a.createElement(p.a,{elevation:0,className:t.paper},r.a.createElement(Ea,null))),r.a.createElement(g.a,{item:!0,xs:12,sm:9},r.a.createElement(T.a,{disabled:!a.length,onClick:function(){pt(a[0])}},"Upload"))))}var ga=new he.auth.GoogleAuthProvider,ba=r.a.createContext(null);function ya(e){var t=e.name,a=e.logo,i=e.navigation,l=e.includeMedia,o=e.authentication,c=e.allowSkipLogin,u=(e.firebaseConfig,e.additionalViews),s=it(),d=Object(pe.a)(),p=r.a.useState(!1),f=p[0],v=p[1],E=r.a.useState(!1),b=E[0],y=E[1],j=r.a.useState(),w=j[0],C=j[1],x=r.a.useState(!0),S=x[0],I=x[1],F=r.a.useState(null),q=F[0],D=F[1],L=r.a.useState(!1),M=L[0],N=L[1],_=r.a.useState(),A=_[0],W=_[1],R=r.a.useState(!1),B=R[0],H=R[1],z=r.a.useState(!1),G=z[0],Y=z[1],J=void 0===o||!!o,K=J&&c,X=o instanceof Function?o:void 0,Z=function(e){try{var t=function(){I(!1)};H(!1);var a=function(){if(X&&e)return Promise.resolve(X(e)).then((function(t){t?D(e):H(!0)}));D(e)}();return Promise.resolve(a&&a.then?a.then(t):t())}catch(n){return Promise.reject(n)}};Object(n.useEffect)((function(){fetch("/__/firebase/init.json").then((function(e){try{console.log("Firebase init response",e);var t=function(){if(e&&e.status<300)return Promise.resolve(e.json()).then((function(e){!function(e){try{Object(he.initializeApp)(e),Object(he.auth)().onAuthStateChanged(Z,(function(e){return W(e)})),Y(!1),y(!0)}catch(t){console.error(t),Y(!0)}}(e)}))}();return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(a){return Promise.reject(a)}})).catch((function(e){return C("Could not load Firebase configuration from Firebase hosting. If the app is not deployed in Firebase hosting, you need to specify the configuration manually"+e.toString())}))}),[]);var Q=function(){return v(!f)};function ee(){W(null),Object(he.auth)().signInWithPopup(ga).then((function(e){})).catch((function(e){return W(e)}))}function le(){W(null),N(!0)}function ce(){Object(he.auth)().signOut(),N(!1)}function me(e){var t=function e(t,a,n){void 0===a&&(a=""),void 0===n&&(n=[]);var r=[];return t.forEach((function(t){var i=Wt(t.relativePath),l=Wt(a+"/"+i),o=Mt(l||"",t),c=l+"/:"+o,u=[].concat(n,[{entityPlaceholderPath:l,view:t},{entityPlaceholderPath:c,placeHolderId:o,view:t}]),s={entries:[{routeType:"entity",placeHolderId:o,fullPath:l+"/new"},{routeType:"entity",placeHolderId:o,fullPath:c},{routeType:"collection",placeHolderId:o,fullPath:l}],breadcrumbs:u,entityPlaceholderPath:l,view:t};t.schema.subcollections&&e(t.schema.subcollections,c,u).forEach((function(e){return r.push(e)})),r.push(s)})),r}(i),a=Wt(i[0].relativePath);return r.a.createElement(Ee.d,null,t.map((function(e){var t=e.entries,a=e.entityPlaceholderPath,n=e.breadcrumbs,i=e.view;return t.map((function(e){return r.a.createElement(Ee.b,{path:At(e.fullPath),key:"navigation_"+e.routeType+"_"+e.placeHolderId,render:function(t){if("entity"===e.routeType)return r.a.createElement(va,Object.assign({},t,{view:i,breadcrumbs:n,entityPlaceholderPath:a}));if("collection"===e.routeType)return r.a.createElement(zt,Object.assign({},t,{view:i,breadcrumbs:n,entityPlaceholderPath:a}));throw Error("No know routeType")}})}))})).flat(),e&&r.a.createElement(Ee.b,{path:"/media"},r.a.createElement(ha,null)),u&&u.map((function(e){return r.a.createElement(Ee.b,{key:"additional_view_"+e.path,path:Rt(e.path)},e.view)})),r.a.createElement(Ee.a,{exact:!0,from:"/",to:At(a)}))}return r.a.createElement(fe.a,{theme:d},r.a.createElement(ue.a,{utils:se.a},G?r.a.createElement(m.a,null,"It seems like the provided Firebase config is not correct"):S?r.a.createElement(nt,null):!J||q||M?function(){if(w)return r.a.createElement(m.a,null," ",w," ");if(!b)return r.a.createElement(nt,null);var e=void 0!==l&&l,n=r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:s.toolbar},a&&r.a.createElement("img",{className:s.logo,src:a})),r.a.createElement(V.a,null),r.a.createElement(P.a,null,Object.entries(i).map((function(e,t){var a=e[0],n=e[1];return r.a.createElement(k.a,{button:!0,key:"navigation_"+t+"_"+a,component:ve.b,to:At(n.relativePath)},r.a.createElement(U.a,{primary:n.name,primaryTypographyProps:{variant:"subtitle2"}}))})),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,null),r.a.createElement(k.a,{button:!0,component:ve.b,to:"/media"},r.a.createElement(U.a,{primary:"Media",primaryTypographyProps:{variant:"subtitle2"}}))),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,null),u.map((function(e){return r.a.createElement(k.a,{button:!0,key:"additional-view-"+e.path,component:ve.b,to:Rt(e.path)},r.a.createElement(U.a,{primary:e.name,primaryTypographyProps:{variant:"subtitle2"}}))})))));return r.a.createElement(ba.Provider,{value:q},r.a.createElement(ve.a,null,r.a.createElement(m.a,{className:s.root},r.a.createElement(te.a,null),r.a.createElement($.a,{position:"fixed",className:s.appBar},r.a.createElement(ae.a,null,r.a.createElement(O.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:Q,className:s.menuButton},r.a.createElement(oe.a,null)),r.a.createElement(h.a,{variant:"h6",noWrap:!0},t),r.a.createElement(m.a,{className:s.grow}),r.a.createElement(m.a,{p:2},q&&q.photoURL?r.a.createElement(ne.a,{src:q.photoURL}):r.a.createElement(ne.a,null,(null===q||void 0===q?void 0:q.displayName)?q.displayName[0]:"A")),r.a.createElement(T.a,{variant:"text",color:"inherit",onClick:ce},"Log Out"))),r.a.createElement("nav",{className:s.drawer},r.a.createElement(re.a,{mdUp:!0,implementation:"css"},r.a.createElement(ie.a,{variant:"temporary",anchor:"rtl"===d.direction?"right":"left",open:f,onClose:Q,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0}},n)),r.a.createElement(re.a,{smDown:!0,implementation:"css"},r.a.createElement(ie.a,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0},n))),r.a.createElement("main",{className:s.content},r.a.createElement(m.a,{className:s.toolbar}),me(e)))))}():r.a.createElement(g.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(m.a,{className:s.toolbar},a&&r.a.createElement("img",{className:s.logo,src:a})),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:ee},"Google login")),K&&r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(T.a,{onClick:le},"Skip login")),r.a.createElement(g.a,{item:!0,xs:12},B&&r.a.createElement(m.a,{p:2},"It looks like you don't have access to the CMS, based on the specified Authenticator configuration"),A&&r.a.createElement(m.a,{p:2},A.message)))))}var ja=function(){function e(e,t){this.algoliaClient=e,this.index=e.initIndex(t)}return e.prototype.performTextSearch=function(e){return console.log("Performing Algolia query",e),this.index.search(e).then((function(e){var t=e.hits;return console.log(t),t.map((function(e){return e.objectID}))})).catch((function(e){return console.log(e),[]}))},e}(),wa=a(241),Oa=a(197);var Ta={customId:!0,name:"Product",properties:{name:{title:"Name",validation:{required:!0},dataType:"string",includeInListView:!0,includeAsMapPreview:!0},price:{title:"Price",validation:{required:!0,requiredMessage:"You must set a price"},filterable:!0,dataType:"number",includeInListView:!0},status:{title:"Status",validation:{required:!0},dataType:"string",enumValues:{private:"Private",public:"Public"},includeInListView:!0},categories:{title:"Categories",validation:{required:!0},dataType:"array",of:{dataType:"string",enumValues:{electronics:"Electronics",books:"Books",furniture:"Furniture",clothing:"Clothing",food:"Food"}},includeInListView:!0},image:{title:"Image",dataType:"string",storageMeta:{mediaType:"image",storagePath:"images",acceptedFiles:["image/*"]},includeInListView:!0,includeAsMapPreview:!0},tags:{title:"Tags",description:"Example of generic array",validation:{required:!0},dataType:"array",of:{dataType:"string"},includeInListView:!0},description:{title:"Description",description:"Not mandatory but it'd be awesome if you filled this up",dataType:"string",includeInListView:!1},published:{title:"Published",dataType:"boolean",includeInListView:!0},expires_on:{title:"Expires on",dataType:"timestamp",includeInListView:!0},publisher:{title:"Publisher",description:"This is an example of a map property",dataType:"map",properties:{name:{title:"Name",includeInListView:!0,dataType:"string"},external_id:{title:"External id",includeInListView:!0,dataType:"string"}},includeInListView:!0},available_locales:{title:"Available locales",description:"This is an example of a disabled field",dataType:"array",disabled:!0,of:{dataType:"string"},includeInListView:!0}}},Pa={name:"Blog entry",properties:{name:{title:"Name",validation:{required:!0},filterable:!0,dataType:"string",includeInListView:!0},long_text:{title:"Long text",description:"This field is using a custom component",validation:{required:!0},dataType:"string",customField:function(e){var t,a=e.property,n=e.field,i=e.rows,l=e.form,o=l.isSubmitting,c=l.errors,u=l.touched,s=l.setFieldValue,m=(Object(wa.a)(e,["property","field","rows","form"]),Object(Oa.a)(c,n.name)),d=Object(Oa.a)(u,n.name)&&!!m,p=n.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{required:null===(t=a.validation)||void 0===t?void 0:t.required,error:d,disabled:o,fullWidth:!0},r.a.createElement(A.a,null,a.title||n.name),r.a.createElement(j.a,{multiline:!0,rows:i,defaultValue:p,onChange:function(e){return s(n.name,e.target.value)}}),d&&r.a.createElement(W.a,{id:"component-error-text"},m),a.description&&r.a.createElement(W.a,null,a.description)))},additionalProps:{rows:5},includeInListView:!1},images:{title:"Images",dataType:"array",of:{dataType:"string",storageMeta:{mediaType:"image",storagePath:"images",acceptedFiles:["image/*"]}},includeInListView:!0},priority:{title:"Priority",description:"This field allows the selection of Infinity as a value",dataType:"number",additionalProps:{allowInfinity:!0},includeInListView:!1},content:{title:"Content",validation:{required:!0},dataType:"array",of:{dataType:"string"},includeInListView:!1},status:{title:"Status",validation:{required:!0},dataType:"string",filterable:!0,enumValues:{published:"Published",draft:"Draft"},includeInListView:!0},products:{title:"Products",validation:{required:!0},dataType:"array",of:{dataType:"reference",collectionPath:"products",schema:Ta},includeInListView:!0}}},ka={customId:!0,name:"Test entity",properties:{tags:{title:"Tags",includeInListView:!0,dataType:"array",of:{dataType:"string"}},title:{title:"Title",description:"A catching title is important",includeInListView:!0,dataType:"string"},description:{title:"Description",includeInListView:!0,dataType:"string"},search_adjacent:{title:"Search adjacent",includeInListView:!0,dataType:"boolean"},difficulty:{title:"Difficulty",includeInListView:!0,dataType:"number"},created_at:{title:"Created at",includeInListView:!0,dataType:"timestamp"},image:{title:"Image",dataType:"string",includeInListView:!0,storageMeta:{mediaType:"image",storagePath:"test",acceptedFiles:["image/*"]}}}},Ca={title:"Spanish title",builder:function(e){return r.a.createElement(ta,{builder:e.reference.collection("locales").doc("es-ES").get().then((function(e){return e.get("title")}))})}},xa=void 0,Sa={name:"Locales",relativePath:"locales",schema:{customId:{"de-DE":"German","en-US":"English (United States)","es-ES":"Spanish (Spain)","es-419":"Spanish (South America)"},name:"Locale",properties:{title:{title:"Title",validation:{required:!0},dataType:"string",includeInListView:!0},selectable:{title:"Selectable",description:"Is this locale selectable",dataType:"boolean",includeInListView:!0},video:{title:"Video",dataType:"string",validation:{required:!1},storageMeta:{mediaType:"video",storagePath:"videos",acceptedFiles:["video/*"]},includeInListView:!0}}}},Ia=[{relativePath:"products",schema:Ta,name:"Products",textSearchDelegate:(xa=s()("Y6FR1MDSVW","f084e6dcc154c04295c8124dbb797ff1"))&&new ja(xa,"products"),additionalColumns:[Ca],subcollections:[Sa]},{relativePath:"users",schema:{name:"User",properties:{first_name:{title:"First name",dataType:"string",includeInListView:!0,filterable:!0},last_name:{title:"Last name",dataType:"string",includeInListView:!0},picture:{title:"Picture",dataType:"map",properties:{large:{title:"Large",dataType:"string",urlMediaType:"image",includeAsMapPreview:!0},medium:{title:"Medium",dataType:"string",urlMediaType:"image"},thumbnail:{title:"Thumbnail",dataType:"string",urlMediaType:"image"}},includeInListView:!0},email:{title:"Email",dataType:"string",includeInListView:!0},phone:{title:"Phone",dataType:"string",includeInListView:!0}}},name:"Users",textSearchDelegate:xa&&new ja(xa,"users")},{relativePath:"blog",schema:Pa,name:"Blog",textSearchDelegate:xa&&new ja(xa,"blog")}];l.a.render(r.a.createElement(ya,{name:"Test shop CMS",authentication:function(e){return console.log("Allowing access to",null===e||void 0===e?void 0:e.email),!0},allowSkipLogin:!0,logo:c.a,navigation:Ia,firebaseConfig:{apiKey:"AIzaSyBzt-JvcXvpDrdNU7jYX3fC3v0EAHjTKEw",authDomain:"firecms-demo-27150.firebaseapp.com",databaseURL:"https://firecms-demo-27150.firebaseio.com",projectId:"firecms-demo-27150",storageBucket:"firecms-demo-27150.appspot.com",messagingSenderId:"837544933711",appId:"1:837544933711:web:75822ffc0840e3ae01ad3a",measurementId:"G-8HRE8MVXZJ"}}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[262,1,2]]]);
//# sourceMappingURL=main.76134159.chunk.js.map