(this["webpackJsonpfirecms-example"]=this["webpackJsonpfirecms-example"]||[]).push([[0],{225:function(e,t,a){e.exports=a.p+"static/media/test_shop_logo.869a9462.png"},272:function(e,t,a){e.exports=a(334)},277:function(e,t,a){},334:function(e,t,a){"use strict";a.r(t),a.d(t,"testEntitySchema",(function(){return _a}));var n=a(0),r=a.n(n),i=a(15),l=a.n(i),c=(a(277),a(225)),o=a.n(c),u=a(249),s=a.n(u);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=a(226),d=a(227),p=a(129),f=a(108),b=a.n(f),v=a(181),E=a(45),h=a(128),g=a(7),y=a(53),j=a(382),O=a(384),w=a(143),T=a(222),k=a(223),P=a(339),x=a(109),C=a(385),S=a(346),I=a(389),F=a(340),V=a(431),q=a(200),D=a(390),L=a(388),M=a(343),N=a(391),_=a(392),A=a(393),W=a(394),R=a(432),U=a(396),B=a(397),H=a(398),z=a(403),G=a(426),Y=a(425),J=a(407),K=a(347),X=a(345),Z=a(424),$=a(408),Q=a(409),ee=a(410),te=a(411),ae=a(412),ne=a(401),re=a(402),ie=a(404),le=a(414),ce=a(417),oe=a(418),ue=a(422),se=a(413),me=a(420),de=a(399),pe=a(433),fe=a(423),be=a(429),ve=a(246),Ee=a.n(ve),he=a(421),ge=a(34),ye=a(250),je=(a(279),a(11)),Oe=a(157),we=a(16),Te=a(406),ke=a(70),Pe=a(96),xe=a(29),Ce=a.n(xe),Se=(a(288),a(400)),Ie=a(428),Fe=a(434),Ve=a(182),qe=a(241),De=a.n(qe),Le=a(240),Me=a.n(Le),Ne=(a(289),a(290),a(183)),_e=a.n(Ne),Ae=a(237),We=a.n(Ae),Re=a(386),Ue=a(17),Be=a(184),He=a.n(Be),ze=a(256),Ge=a(238),Ye=a.n(Ge),Je=a(395),Ke=a(239),Xe=a.n(Ke),Ze=a(230),$e=a.n(Ze),Qe=a(146),et=a.n(Qe),tt=a(251),at=a(243),nt=a.n(at),rt=a(415),it=a(416),lt=a(80),ct=a(419),ot=a(427),ut=a(244),st=a.n(ut),mt=a(245),dt=a.n(mt);function pt(e){return r.a.createElement(j.a,{display:"flex",width:"100%",height:"100vh"},r.a.createElement(j.a,{m:"auto"},r.a.createElement(O.a,Object.assign({},e))))}var ft=function(e){var t=e.children;return r.a.createElement(j.a,{display:"flex"},r.a.createElement(w.a,{elevation:0},r.a.createElement(j.a,{p:1,pr:2,pl:2},t)))},bt=Object(T.a)((function(e){return Object(k.a)({root:{display:"flex",width:"100%",marginTop:e.spacing(3)},drawer:Object(y.a)({},e.breakpoints.up("md"),{width:240,flexShrink:0}),appBar:Object(y.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(y.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),grow:{flexGrow:1},toolbar:e.mixins.toolbar,logo:{padding:e.spacing(3),maxWidth:240},drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3),width:"calc(100% - ".concat(240,"px)")},filter:{flexGrow:1,padding:e.spacing(1)},table:{minWidth:750},tableWrapper:{overflow:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tree:{height:216,flexGrow:1,maxWidth:400}})})),vt=Object(T.a)((function(e){return{appBar:{position:"relative"},layout:Object(y.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(y.a)({padding:e.spacing(1)},e.breakpoints.up(600+2*e.spacing(3)),{padding:e.spacing(2)}),dropZone:{"&:hover":{backgroundColor:"#f5f5f5"}},activeDrop:{backgroundColor:"#f5f5f5"},acceptDrop:{borderColor:e.palette.success.main},rejectDrop:{borderColor:e.palette.error.main},uploadItem:{padding:e.spacing(1),minWidth:220,minHeight:220},formPaper:Object(y.a)({marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{}),buttons:{display:"flex",justifyContent:"flex-end"},button:{margin:e.spacing(1)},form:{marginTop:e.spacing(2)}}})),Et=Object(T.a)((function(e){return Object(k.a)({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(je.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"},searchBar:{flex:"1 1 100%"}})}));Object(Oe.a)({palette:{background:{default:"#f1f1f1"},primary:{main:"#03238d"},secondary:{main:"#8AC9BD"},error:{main:Ve.a.A400}},typography:{h6:{fontSize:16,fontWeight:600}},shape:{borderRadius:2}});function ht(e,t,a){return console.debug("fetch entity",e,t),Object(xe.firestore)().collection(e).doc(t).get().then((function(e){return gt(e,a)}))}function gt(e,t){var a=function(e,t){var a=e;return Object.entries(t.properties).forEach((function(t){var n,r=Object(g.a)(t,2),i=r[0],l=r[1];e&&e[i]?a[i]=e[i]:(null===(n=l.validation)||void 0===n?void 0:n.required)&&(a[i]=void 0)})),a}(function e(t){if("object"!==typeof t||t instanceof xe.firestore.DocumentReference||t instanceof xe.firestore.GeoPoint)return t;var a={};return Object.entries(t).forEach((function(t){var n=Object(g.a)(t,2),r=n[0],i=n[1];i&&i instanceof xe.firestore.Timestamp?i=i.toDate():Array.isArray(i)?i=i.map((function(t){return e(t)})):i&&"object"===typeof i&&(i=e(i)),a[r]=i})),a}(e.data()),t);return{id:e.id,snapshot:e,reference:e.ref,values:a||yt(t)}}function yt(e){return Object.entries(e.properties).filter((function(e){var t,a=Object(g.a)(e,2);a[0];return null===(t=a[1].validation)||void 0===t?void 0:t.required})).map((function(e){var t=Object(g.a)(e,2),a=t[0];t[1];return Object(y.a)({},a,void 0)})).reduce((function(e,t){return Object(h.a)({},e,{},t)}),{})}function jt(e,t){return Object(xe.storage)().ref().child("".concat(t,"/").concat(e.name)).put(e)}function Ot(e){return Object.entries(e).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].includeInListView}))}function wt(e){return Object.entries(e).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].filterable}))}function Tt(e){var t=e.name,a=e.property,i=a.enumValues;return r.a.createElement(Ue.b,{name:"".concat(t)},(function(e){var l=e.field,c=e.form.setFieldValue,o=(Object(E.a)(e,["field","form"]),l.value?l.value:["==",void 0]),u=Object(g.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(s),p=Object(g.a)(d,2),f=p[0],b=p[1],v=Object(n.useState)(m),h=Object(g.a)(v,2),y=h[0],j=h[1];function O(e,a){b(e),j(y),c(t,e&&a?[e,a]:void 0)}return r.a.createElement(P.a,{fullWidth:!0},r.a.createElement(x.a,{variant:"caption"},a.title||t),r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,xs:3},r.a.createElement(S.a,{value:f,autoWidth:!0,onChange:function(e){O(e.target.value,y)}},r.a.createElement(I.a,{value:"=="},"=="),r.a.createElement(I.a,{value:">"},">"),r.a.createElement(I.a,{value:"<"},"<"),r.a.createElement(I.a,{value:">="},">="),r.a.createElement(I.a,{value:"<="},"<="))),!i&&r.a.createElement(C.a,{item:!0,xs:9},r.a.createElement(F.a,{key:"filter-".concat(t),type:"number"===a.dataType?"number":void 0,defaultValue:y,onChange:function(e){var t="number"===a.dataType?parseFloat(e.target.value):e.target.value;O(f,t)}})),i&&r.a.createElement(C.a,{item:!0,xs:9},r.a.createElement(S.a,{fullWidth:!0,key:"filter-".concat(t),value:y,onChange:function(e){O(f,e.target.value)}},Object.entries(i).map((function(e){var t=Object(g.a)(e,2),a=t[0],n=t[1];return r.a.createElement(I.a,{key:"select-".concat(a),value:a},n)}))))))}))}function kt(e){var t=e.schema,a=e.filterValues,n=e.onFilterUpdate,i=wt(t.properties),l=bt();function c(e){return r.a.createElement(j.a,{className:l.filter,width:220},i.map((function(e){var t=Object(g.a)(e,2),a=t[0],n=function(e,t){if("number"===t.dataType||"string"===t.dataType)return r.a.createElement(Tt,{name:e,property:t});return r.a.createElement("div",null,"Currently the field ".concat(t.dataType," is not supported"))}(a,t[1]);return r.a.createElement(j.a,{key:"filter_".concat(a),mb:1},n)})))}var o=a||function(e){return Object.entries(e.properties).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].filterable})).map((function(e){var t=Object(g.a)(e,2),a=t[0];t[1];return Object(y.a)({},a,void 0)})).reduce((function(e,t){return Object(h.a)({},e,{},t)}),{})}(t);return r.a.createElement(_e.a,{variant:"popover",popupId:"collection-filter"},(function(e){return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(V.a,{title:"Clear filter"},r.a.createElement(q.a,{size:"small","aria-label":"filter clear",onClick:function(){return n(void 0)}},r.a.createElement(He.a,{fontSize:"small"}))):r.a.createElement(j.a,{style:{width:26}}),r.a.createElement(V.a,{title:"Filter list"},r.a.createElement(q.a,Object.assign({"aria-label":"filter list"},Object(Ne.bindTrigger)(e)),r.a.createElement(We.a,null))),r.a.createElement(Re.a,Object.assign({},Object(Ne.bindPopover)(e),{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}}),r.a.createElement(j.a,{p:2},r.a.createElement(Ue.e,{initialValues:o,onSubmit:function(t){var a=Object(h.a)({},t);console.log("Updating filters",a),Object.keys(a).forEach((function(e){return void 0===a[e]&&delete a[e]})),n(a),e.close()}},(function(e){e.values,e.errors,e.touched,e.handleChange,e.handleBlur;var t=e.handleSubmit;e.isSubmitting;return r.a.createElement(Ue.d,{onSubmit:t,noValidate:!0},c(),r.a.createElement(j.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(j.a,{p:1,justifyContent:"flex-end"},r.a.createElement(D.a,{size:"small",variant:"outlined",color:"primary",type:"submit"},"Ok"))))})))))}))}var Pt=Object(T.a)((function(e){return Object(k.a)({search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(je.d)(e.palette.common.black,.05),"&:hover":{backgroundColor:Object(je.d)(e.palette.common.black,.1)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})})}));function xt(e){var t=e.onTextSearch,a=Pt(),i=Object(n.useState)(""),l=Object(g.a)(i,2),c=l[0],o=l[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){t(c||void 0)}),250);return function(){clearTimeout(e)}}),[c]),r.a.createElement("div",{className:a.search},r.a.createElement("div",{className:a.searchIcon},r.a.createElement(Ye.a,null)),r.a.createElement(ze.a,{placeholder:"Search",value:c,onChange:function(e){o(e.target.value)},classes:{root:a.inputRoot,input:a.inputInput},endAdornment:c?r.a.createElement(q.a,{size:"small",onClick:function(){o(""),t(void 0)}},r.a.createElement(He.a,{fontSize:"small"})):r.a.createElement(j.a,{style:{width:26}}),inputProps:{"aria-label":"search"}}))}function Ct(e){var t,a=e.property,n=e.small;if(a||console.error("No property assigned for skeleton component",a,n),"string"===a.dataType){var i=a;t=i.urlMediaType?function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.urlMediaType||(null===(t=e.storageMeta)||void 0===t?void 0:t.mediaType);if("image"===n)return Ft(a);if("audio"===n)return It();if("video"===n)return Vt(a);throw Error("URL component misconfigured")}(i,n):i.storageMeta?Ft(n):qt()}else if("array"===a.dataType){var l=a;t="map"===l.of.dataType?function(e){var t=Object.entries(e).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].includeAsMapPreview}));t.length||(t=Object.entries(e).slice(0,3));return r.a.createElement(N.a,{size:"small"},r.a.createElement(_.a,null,[0,1,2].map((function(e,a){return r.a.createElement(A.a,{key:"table_".concat(e,"_").concat(a)},t.map((function(e,t){var a=Object(g.a)(e,2),n=a[0],i=a[1];return r.a.createElement(W.a,{key:"table-cell-".concat(n),component:"th"},r.a.createElement(Ct,{property:i,small:!0}))})))}))))}(l.of.properties):"string"===l.of.dataType?l.of.enumValues?r.a.createElement(C.a,null,[0,1].map((function(e,t){return qt()}))):l.of.storageMeta?St(l.of):r.a.createElement(C.a,null,[0,1].map((function(e,t){return qt()}))):St(l.of)}else t="map"===a.dataType?function(e){var t=Object.entries(e.properties).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].includeAsMapPreview}));t.length||(t=Object.entries(e.properties).slice(0,3));return r.a.createElement(L.a,null,t.map((function(e){var t=Object(g.a)(e,2),a=t[0],n=t[1];return r.a.createElement(M.a,{key:n.title+a},r.a.createElement(Ct,{property:n,small:!0}))})))}(a):"timestamp"===a.dataType?qt():"reference"===a.dataType?r.a.createElement(Je.a,{variant:"rect",width:200,height:100}):(a.dataType,qt());return t||null}function St(e){return r.a.createElement(C.a,null,[0,1].map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct,{property:e,small:!0}))})))}function It(){return r.a.createElement(Je.a,{variant:"rect",width:300,height:100})}function Ft(e){return r.a.createElement(Je.a,{variant:"rect",width:e?100:200,height:e?100:200})}function Vt(e){return r.a.createElement(Je.a,{variant:"rect",width:e?300:500,height:e?200:250})}function qt(){return r.a.createElement(Je.a,{variant:"text"})}function Dt(e){var t=e.storagePath,a=e.property,i=e.renderUrlComponent,l=e.small,c=r.a.useState(),o=Object(g.a)(c,2),u=o[0],s=o[1];return Object(n.useEffect)((function(){t&&function(e){return Object(xe.storage)().ref(e).getDownloadURL()}(t).then((function(e){console.debug("File available at",e),s(e)}))}),[t]),u?i(a,u,l):Ft(l)}function Lt(e){var t=e.reference,a=e.schema,r=e.previewComponent;if(!t)throw Error("Reference previews should be initialized with a value");var i=Object(n.useState)(),l=Object(g.a)(i,2),c=l[0],o=l[1];Object(n.useEffect)((function(){var e=function(e,t,a){return e.onSnapshot((function(e){return a(gt(e,t))}))}(t,a,(function(e){o(e)}));return function(){return e()}}),[t,a]);var u=Object.entries(a.properties).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].includeAsMapPreview}));return u.length||(u=Object.entries(a.properties).slice(0,3)),Object(n.createElement)(j.a,{display:"flex"},Object(n.createElement)(j.a,{mt:1.5},Object(n.createElement)(Xe.a,{color:"disabled"})),Object(n.createElement)(L.a,null,u.map((function(e){var t=Object(g.a)(e,2),a=t[0],i=t[1];return Object(n.createElement)(M.a,{key:"ref_prev"+i.title+a},c?Object(n.createElement)(r,{value:c.values[a],property:i,small:!0}):Object(n.createElement)(Ct,{property:i,small:!0}))}))))}function Mt(e){var t,a,n,i,l,c=e.value,o=e.property,u=e.small;if(!c)return null;if(o||console.error("No property assigned for preview component",c,o,u),"string"===o.dataType&&"string"===typeof c){var s=o;t=s.urlMediaType?Rt(s,c,u):s.storageMeta?function(e,t,a){return r.a.createElement(Dt,{storagePath:t,property:e,small:a,renderUrlComponent:Rt})}(s,c,u):s.enumValues?s.enumValues[c]:c}else if("array"===o.dataType&&c instanceof Array){var m=o;"map"===m.of.dataType?t=function(e,t){var a=Object.entries(e).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].includeAsMapPreview}));a.length||(a=Object.entries(e).slice(0,3));return r.a.createElement(N.a,{size:"small"},r.a.createElement(_.a,null,t&&t.map((function(e,t){return r.a.createElement(A.a,{key:"table_".concat(e,"_").concat(t)},a.map((function(t,a){var n=Object(g.a)(t,2),i=n[0],l=n[1];return r.a.createElement(W.a,{key:"table-cell-".concat(i),component:"th"},r.a.createElement(Mt,{value:e[i],property:l,small:!0}))})))}))))}(m.of.properties,c):"string"===m.of.dataType?m.of.enumValues?(i=m.of.enumValues,l=c,t=r.a.createElement(C.a,null,l&&l.map((function(e,t){return Ut(i,e)})))):t=m.of.storageMeta?Nt(m.of,c):function(e){if(e&&!Array.isArray(e))return r.a.createElement("div",null,"Unexpected value: ".concat(e));return r.a.createElement(C.a,null,e&&e.map((function(e,t){return r.a.createElement(R.a,{size:"small",key:e,label:r.a.createElement(x.a,{variant:"caption",color:"textPrimary"},e)})})))}(c):t=Nt(m.of,c)}else t="map"===o.dataType&&"object"===typeof c?function(e,t){var a=Object.entries(e.properties).filter((function(e){var t=Object(g.a)(e,2);t[0];return t[1].includeAsMapPreview}));a.length||(a=Object.entries(e.properties).slice(0,3));return r.a.createElement(L.a,null,a.map((function(e){var a=Object(g.a)(e,2),n=a[0],i=a[1];return r.a.createElement(M.a,{key:i.title+n},r.a.createElement(Mt,{value:t[n],property:i,small:!0}))})))}(o,c):"timestamp"===o.dataType&&c instanceof Date?c&&c.toLocaleString():"reference"===o.dataType&&c instanceof xe.firestore.DocumentReference?c&&(a=c,n=o.schema,r.a.createElement(Lt,{reference:a,schema:n,previewComponent:Mt})):"boolean"===o.dataType?c?"Yes":"No":"object"===typeof c?c.toString():c;return t||null}function Nt(e,t){return r.a.createElement(C.a,null,t&&t.map((function(a,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{m:1},r.a.createElement(Mt,{value:a,property:e,small:!0})),n<t.length-1&&r.a.createElement(U.a,null))})))}function _t(e){return r.a.createElement("audio",{controls:!0,src:e},"Your browser does not support the",r.a.createElement("code",null,"audio")," element.")}function At(e,t){return r.a.createElement(j.a,{display:"flex",alignItems:"center",justifyContent:"center",width:t?100:200,height:t?100:200},r.a.createElement("img",{src:e,style:{maxWidth:t?100:200,maxHeight:t?100:200}}))}function Wt(e,t){return r.a.createElement(B.a,{style:{maxWidth:t?300:500},component:"video",controls:!0,image:e})}function Rt(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.urlMediaType||(null===(a=e.storageMeta)||void 0===a?void 0:a.mediaType);if("image"===r)return At(t,n);if("audio"===r)return _t(t);if("video"===r)return Wt(t,n);throw Error("URL component misconfigured")}function Ut(e,t){var a=e[t];return r.a.createElement(R.a,{size:"small",key:t,label:r.a.createElement(x.a,{variant:"caption",color:a?"textPrimary":"error"},a||t)})}function Bt(e){var t=bt(),a=r.a.useState([]),i=Object(g.a)(a,2),l=i[0],c=i[1],o=r.a.useState(),u=Object(g.a)(o,2),s=u[0],m=u[1],d=r.a.useState(),p=Object(g.a)(d,2),f=p[0],E=p[1],h=r.a.useState(!1),y=Object(g.a)(h,2),O=y[0],T=y[1],k=r.a.useState(!1),P=Object(g.a)(k,2),S=P[0],I=P[1],F=r.a.useState([]),V=Object(g.a)(F,2),D=V[0],L=V[1],M=r.a.useState(e.initialFilter),R=Object(g.a)(M,2),U=R[0],B=R[1],z=r.a.useState(),G=Object(g.a)(z,2),Y=G[0],J=G[1],K=r.a.useState(),X=Object(g.a)(K,2),Z=X[0],$=X[1],Q=r.a.useState(0),ee=Object(g.a)(Q,2),te=ee[0],ae=ee[1],ne=r.a.useState([]),re=Object(g.a)(ne,2),ie=re[0],le=re[1],ce=r.a.useState(e.paginationEnabled?10:void 0),oe=Object(g.a)(ce,2),ue=oe[0],se=oe[1];Object(n.useEffect)((function(){var t=ie[te];m(!0);var a=function(e,t,a,n,r,i,l,c,o){console.log("Listening collection",e,i,r,l,c,o);var u=Object(xe.firestore)().collection(e);return r&&Object.entries(r).filter((function(e){var t=Object(g.a)(e,2);t[0];return!!t[1]})).forEach((function(e){var t=Object(g.a)(e,2),a=t[0],n=Object(g.a)(t[1],2),r=n[0],i=n[1];return u=u.where(a,r,i)})),c&&o&&(u=u.orderBy(c,o)),l&&(u=u.startAfter(l)),i&&(u=u.limit(i)),u.onSnapshot((function(e){return a(e.docs.map((function(e){return gt(e,t)})))}),n)}(e.collectionPath,e.schema,(function(e){if(m(!1),E(void 0),e.length){var t=e[e.length-1];ie[te+1]=Z?t.values[Z]:t.snapshot}c(e)}),(function(e){m(!1),E(e)}),U,ue,t,Z,Y);return function(){return a()}}),[e.collectionPath,e.schema,ue,te,Y,Z,ie,U]);var me=ue?l.length-ue:0,de=Ot(e.schema.properties),pe=!!e.onEntityEdit,fe=!!e.onEntityDelete,be=function(t,a){return r.a.createElement(W.a,{key:"row-buttons-".concat(a)},r.a.createElement(j.a,{minWidth:96},pe&&r.a.createElement(q.a,{"aria-label":"edit",disabled:!t,onClick:function(a){return t&&function(t,a){e.onEntityEdit&&(t.stopPropagation(),e.onEntityEdit(e.collectionPath,a))}(a,t)}},r.a.createElement(Me.a,{color:"action"})),fe&&r.a.createElement(q.a,{"aria-label":"delete",disabled:!t,onClick:function(a){return t&&function(t,a){e.onEntityDelete&&(t.stopPropagation(),e.onEntityDelete(e.collectionPath,a))}(a,t)}},r.a.createElement(De.a,null))),r.a.createElement(j.a,{maxWidth:96,component:"div",textAlign:"center",textOverflow:"ellipsis",overflow:"auto"},t?r.a.createElement(x.a,{variant:"caption"}," ",t.id," "):qt()))};function ve(t,a){return r.a.createElement(A.a,{key:"table_".concat(t.snapshot.id,"_").concat(a),hover:!0,onClick:function(a){return function(t,a){e.onEntityClick&&(t.stopPropagation(),e.onEntityClick(e.collectionPath,a))}(a,t)},tabIndex:-1},be(t,a),de.map((function(e,a){var n=Object(g.a)(e,2),i=n[0],l=n[1];return function(e,t,a,n){return r.a.createElement(W.a,{key:"table-cell-".concat(a),component:"th",align:Gt(n)},r.a.createElement(Mt,{value:t,property:n,small:!1}))}(0,t.values[i],i,l)})),e.additionalColumns&&e.additionalColumns.map((function(e,a){return function(e,t){return r.a.createElement(W.a,{key:"table-additional-".concat(e),component:"th"},t)}(a,e.builder(t))})))}function Ee(t){var a=be(null,t);return r.a.createElement(A.a,{key:"table_row_skeleton_".concat(t),tabIndex:-1},a,de.map((function(e,t){var a=Object(g.a)(e,2);return function(e,t,a){return r.a.createElement(W.a,{key:"table-cell-".concat(t),component:"th",align:Gt(a)},r.a.createElement(Ct,{property:a,small:!1}))}(0,a[0],a[1])})),e.additionalColumns&&e.additionalColumns.map((function(e,t){return qt()})))}var he=r.a.createElement(_.a,null,[0,1,2,3,4].map((function(e,t){return Ee(t)}))),ge=r.a.createElement(_.a,null,O&&D.map((function(e,t){return ve(e,t)})),!O&&l.map((function(e,t){return ve(e,t)})),me>0&&r.a.createElement(A.a,{style:{height:53*me}},r.a.createElement(W.a,{colSpan:de.length}))),ye=s||S?he:ge,je=!!e.textSearchDelegate;function Oe(){return(Oe=Object(v.a)(b.a.mark((function t(a){var n,r,i,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!je){t.next=18;break}if(I(!0),n=e.textSearchDelegate,a){t.next=8;break}L([]),T(!1),t.next=17;break;case 8:return T(!0),t.next=11,n.performTextSearch(a);case 11:return r=t.sent,i=r.map((function(t){return ht(e.collectionPath,t,e.schema)})),t.next=15,Promise.all(i);case 15:l=t.sent,L(l);case 17:I(!1);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement(H.a,{component:w.a,elevation:1},e.includeToolbar&&r.a.createElement(zt,{schema:e.schema,filterValues:U,onTextSearch:je?function(e){return Oe.apply(this,arguments)}:void 0,collectionPath:e.collectionPath,onFilterUpdate:function(e){B(e)}}),f&&r.a.createElement(j.a,{m:5},r.a.createElement(C.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(C.a,{container:!0,justify:"center"},r.a.createElement(x.a,{variant:"h6",color:"error"},f.name)),r.a.createElement(C.a,{container:!0,justify:"center"},r.a.createElement(x.a,{color:"error"},f.message)))),!f&&r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(N.a,{stickyHeader:!0,className:t.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Ht,{classes:t,schema:e.schema,order:Y,orderBy:Z,sortable:!D.length,additionalColumns:e.additionalColumns,onRequestSort:function(e,t){ae(0),le([]);var a=Z===t&&"asc"===Y;J(Z===t&&"desc"===Y?"asc":a?void 0:"desc"),$(a?void 0:t)}}),ye)),e.paginationEnabled&&!O&&ue&&r.a.createElement(Ie.a,{rowsPerPageOptions:[5,10,25],component:"div",count:1/0,rowsPerPage:ue,page:te,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:function(e,t){ae(t)},onChangeRowsPerPage:function(e){se(parseInt(e.target.value,10)),ae(0)}}))}function Ht(e){var t=e.classes,a=e.order,n=e.orderBy,i=e.sortable,l=e.onRequestSort,c=e.schema,o=e.additionalColumns,u=Ot(c.properties).map((function(e,t){var a=Object(g.a)(e,2),n=a[0],r=a[1];return{index:t,id:n,align:Gt(r),label:r.title||n}}));return r.a.createElement(Se.a,null,r.a.createElement(A.a,null,r.a.createElement(W.a,{key:"header-id",align:"center",padding:"default"},"Id"),u.map((function(e){var c,o=i&&n===e.id;return r.a.createElement(W.a,{key:e.id,align:e.align,padding:"default",sortDirection:!!o&&a},r.a.createElement(Fe.a,{active:o,direction:a,onClick:(c=e.id,function(e){l(e,c)})},e.label,o?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"Sorted descending":"asc"===a?"Sorted ascending":""):null))})),o&&o.map((function(e,t){return r.a.createElement(W.a,{key:"head-additional-".concat(t),align:"left",padding:"default"},e.title)}))))}function zt(e){var t=Et(),a=wt(e.schema.properties);return r.a.createElement(de.a,{className:t.root},r.a.createElement(C.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(C.a,{item:!0},r.a.createElement(j.a,{className:t.title},r.a.createElement(x.a,{variant:"h6"},"All ",e.schema.name),r.a.createElement(x.a,{variant:"caption"},e.collectionPath))),r.a.createElement(C.a,{item:!0},e.onTextSearch&&r.a.createElement(j.a,{className:t.searchBar},r.a.createElement(xt,{onTextSearch:e.onTextSearch}))),r.a.createElement(C.a,{item:!0},e.onFilterUpdate&&a.length>0&&r.a.createElement(kt,{schema:e.schema,filterValues:e.filterValues,onFilterUpdate:e.onFilterUpdate}))))}function Gt(e){return"number"===e.dataType||"timestamp"===e.dataType?"right":"left"}var Yt;function Jt(e,t){var a=t;return Object.entries(e).forEach((function(e){var t=Object(g.a)(e,2),n=t[0],r=t[1];return a=a.replace(":".concat(n),r)})),a}function Kt(e,t){return $e()(Object(h.a)({basePath:e},t)).slice(0,10)}function Xt(e,t){return"".concat("/c","/").concat(t,"/").concat(e)}function Zt(e){return"".concat("/c","/").concat(e,"/new")}function $t(e){return"".concat("/c","/").concat(Qt(e))}function Qt(e){return e.startsWith("/")?e.slice(1):e}function ea(e){return e.startsWith("/")?e:"/".concat(e)}function ta(e){var t=e.entity,a=e.schema;return Object(n.createElement)(H.a,null,Object(n.createElement)(N.a,{"aria-label":"simple table"},Object(n.createElement)(_.a,null,Object(n.createElement)(A.a,{key:"entity_prev_id"},Object(n.createElement)(W.a,{align:"right",component:"th",scope:"row"},"Id"),Object(n.createElement)(W.a,null,t.id)),Object.entries(a.properties).map((function(e){var a=Object(g.a)(e,2),r=a[0],i=a[1];return Object(n.createElement)(A.a,{key:"entity_prev"+i.title+r},Object(n.createElement)(W.a,{align:"right",component:"th",scope:"row"},i.title),Object(n.createElement)(W.a,null,Object(n.createElement)(Mt,{value:t.values[r],property:i,small:!1})))})))))}function aa(e){var t=e.entity,a=e.schema,i=e.onClose,l=e.open,c=Object(E.a)(e,["entity","schema","onClose","open"]),o=Object(n.useState)(!1),u=Object(g.a)(o,2),s=u[0],m=u[1],d=r.a.useState(!1),p=Object(g.a)(d,2),f=p[0],b=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"md",keepMounted:!0,"aria-labelledby":"confirmation-dialog-title",open:l,onBackdropClick:i},c),r.a.createElement(re.a,{id:"confirmation-dialog-title"},"Would you like to delete this ",a.name,"?"),r.a.createElement(z.a,{dividers:!0},t&&r.a.createElement(ta,{entity:t,schema:a})),s&&r.a.createElement(pt,null),!s&&r.a.createElement(ie.a,null,r.a.createElement(D.a,{autoFocus:!0,onClick:function(){i()},color:"primary"},"Cancel"),r.a.createElement(D.a,{onClick:function(){t&&(b(!0),m(!0),function(e){return console.debug("Deleting entity",e),e.reference.delete()}(t).then((function(e){return m(!1)})),i())},color:"primary"},"Ok"))),r.a.createElement(G.a,{open:f,autoHideDuration:3e3,onClose:function(e){return b(!1)}},r.a.createElement(et.a,{elevation:6,variant:"filled",onClose:function(e){return b(!1)}},"Deleted")))}function na(e){var t=e.entity,a=e.schema,n=e.onClose,i=e.open,l=Object(E.a)(e,["entity","schema","onClose","open"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"md",keepMounted:!0,"aria-labelledby":"confirmation-dialog-title",onBackdropClick:n,open:i},l),r.a.createElement(re.a,{id:"confirmation-dialog-title"},a.name),r.a.createElement(z.a,{dividers:!0},t&&r.a.createElement(ta,{entity:t,schema:a})),r.a.createElement(ie.a,null,r.a.createElement(D.a,{onClick:n,color:"primary"},"Ok"))))}function ra(e){var t,a=e.view,n=e.entityPlaceholderPath,i=(e.breadcrumbs,e.match),l=e.history;if(!i)throw Error("No match prop for some reason");t=Jt(i.params,n);var c=r.a.useState(void 0),o=Object(g.a)(c,2),u=o[0],s=o[1],m=r.a.useState(void 0),d=Object(g.a)(m,2),p=d[0],f=d[1];var b=void 0===a.deleteEnabled||a.deleteEnabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{mb:3},r.a.createElement(C.a,{container:!0,spacing:2},r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(ft,null,r.a.createElement(Y.a,{"aria-label":"breadcrumb"},r.a.createElement(J.a,{color:"inherit",component:ke.b,to:"/"},"Home"),r.a.createElement(x.a,{color:"textPrimary"},a.schema.name)))),r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(j.a,{textAlign:"right"},r.a.createElement(D.a,{component:ke.b,to:Zt(t),size:"large",variant:"contained",color:"primary"},"Add ",a.schema.name))))),r.a.createElement(j.a,{mb:3},r.a.createElement(x.a,{variant:"h5"},a.schema.name," List")),r.a.createElement(Bt,{collectionPath:a.relativePath,schema:a.schema,textSearchDelegate:a.textSearchDelegate,includeToolbar:!0,onEntityEdit:function(e,t){var a=Xt(t.id,e);l.push(a)},onEntityClick:function(e,t){s(t)},onEntityDelete:b?function(e,t){f(t)}:void 0,additionalColumns:a.additionalColumns,paginationEnabled:void 0===a.pagination||a.pagination}),u&&r.a.createElement(na,{entity:u,schema:a.schema,open:!!u,onClose:function(){return s(void 0)}}),p&&r.a.createElement(aa,{entity:p,schema:a.schema,open:!!p,onClose:function(){return f(void 0)}}))}function ia(e){var t,a=e.field,n=e.form,i=(n.isSubmitting,n.errors),l=n.touched,c=n.setFieldValue,o=e.property,u=(e.createFormField,e.includeDescription),s=Object(E.a)(e,["field","form","property","createFormField","includeDescription"]),m=o.enumValues,d=Object(Ue.f)(i,a.name),p=Object(Ue.f)(l,a.name)&&!!d,f=a.value;return r.a.createElement(P.a,{fullWidth:!0,required:null===(t=o.validation)||void 0===t?void 0:t.required,error:p},r.a.createElement(K.a,{id:"".concat(a.name,"-label")},o.title||a.name),r.a.createElement(S.a,Object.assign({labelId:"".concat(a.name,"-label"),value:f||"",onChange:function(e){var t=e.target.value;return c(a.name,t||null)}},s),Object.entries(m).map((function(e){var t=Object(g.a)(e,2),a=t[0],n=t[1];return r.a.createElement(I.a,{key:"select-".concat(a),value:a},n)}))),u&&o.description&&r.a.createElement(X.a,null,o.description),p&&r.a.createElement(X.a,{id:"component-error-text"},d))}function la(e){var t,a=e.field,n=e.form,i=n.errors,l=n.touched,c=n.setFieldValue,o=e.property;if("string"!==o.of.dataType&&"number"!==o.of.dataType)throw Error("Field misconfiguration: array field of type string or number");var u=o.of.enumValues;if(!u)throw console.error(o),Error("Field misconfiguration: array field of type string or number needs to have enumValues");var s=Object(Ue.f)(i,a.name),m=Object(Ue.f)(l,a.name)&&!!s;return r.a.createElement(P.a,{fullWidth:!0,required:null===(t=o.validation)||void 0===t?void 0:t.required,error:m},r.a.createElement(K.a,{id:"".concat(a.name,"-label")},o.title||a.name),r.a.createElement(S.a,{multiple:!0,labelId:"".concat(a.name,"-label"),value:a.value?a.value:[],onChange:function(e){return c("".concat(a.name),e.target.value)},renderValue:function(e){return r.a.createElement("div",null,e.map((function(e){return Ut(u,e)})))}},Object.keys(u).map((function(e){return r.a.createElement(I.a,{key:e,value:e},r.a.createElement(Z.a,{checked:!!a.value&&a.value.indexOf(e)>-1}),r.a.createElement($.a,{primary:u[e]}))}))),r.a.createElement(X.a,null,s))}function ca(e){var t,a,r=e.field,i=e.form,l=i.errors,c=i.touched,o=i.setFieldValue,u=e.property,s=e.includeDescription,m=Object(Ue.f)(l,r.name),d=Object(Ue.f)(c,r.name)&&!!m,p="array"===u.dataType?Array.isArray(r.value)?r.value:[]:r.value;return Object(n.createElement)(P.a,{fullWidth:!0,required:null===(t=u.validation)||void 0===t?void 0:t.required,error:d},Object(n.createElement)(X.a,{filled:!0,required:null===(a=u.validation)||void 0===a?void 0:a.required},u.title||r.name),Object(n.createElement)(oa,{value:p,property:u,onChange:function(e){return o(r.name,e)}}),s&&u.description&&Object(n.createElement)(X.a,null,u.description),d&&Object(n.createElement)(X.a,{id:"component-error-text"},m))}function oa(e){var t=e.property,a=e.value,r=e.onChange,i="array"===t.dataType;if(i&&"string"!==t.of.dataType)throw Error("Storage field using array must be of data type string");var l="string"===t.dataType?t.storageMeta:"array"===t.dataType?t.of.storageMeta:void 0;if(!l)throw Error("Storage meta must be specified");var c=vt(),o=i?a.map((function(e){return{storagePath:e}})):[{storagePath:a}],u=Object(n.useState)(o),s=Object(g.a)(u,2),m=s[0],d=s[1];function f(e){return e.filter((function(t,a){return(e.map((function(e){return e.storagePath})).indexOf(t.storagePath)===a||!t.storagePath)&&(e.map((function(e){return e.file})).indexOf(t.file)===a||!t.file)}))}var b=function(e){if(i){var t=m.filter((function(t){return t.storagePath!==e}));r(t.filter((function(e){return!!e.storagePath})).map((function(e){return e.storagePath}))),d(t)}else r(null),d([])},v=Object(tt.a)({accept:l.acceptedFiles,onDrop:function(e){var t;t=f(t=i?[].concat(Object(p.a)(m),Object(p.a)(e.map((function(e){return{file:e}})))):[{file:e[0]}]),d(t)}}),h=v.getRootProps,y=v.getInputProps,O=v.isDragActive,T=v.isDragAccept,k=v.isDragReject,P=h(),C=P.ref,S=Object(E.a)(P,["ref"]);return Object(n.createElement)(Q.a,{rootRef:C},Object(n.createElement)(w.a,Object.assign({elevation:0},S,{className:"".concat(c.dropZone," ").concat(O?c.activeDrop:""," ").concat(k?c.rejectDrop:""," ").concat(T?c.acceptDrop:""),variant:"outlined"}),Object(n.createElement)("input",Object.assign({},y())),Object(n.createElement)(j.a,{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",minHeight:220},m.map((function(e){if(e.storagePath){var a=i?t.of:t;return Object(n.createElement)(sa,{key:"storage_preview_".concat(e.storagePath),property:a,value:e.storagePath,onClear:b})}return e.file?Object(n.createElement)(ua,{key:"storage_upload_".concat(e.file.name),file:e.file,storagePath:l.storagePath,onFileUploadComplete:function(e,t){!function(e,t){console.log("onFileUploadComplete",e,t);var a,n=m.find((function(a){return a.file===t||a.storagePath===e}));n?(n.storagePath=e,n.file=t,a=Object(p.a)(m)):(n={storagePath:e,file:t},a=i?[].concat(Object(p.a)(m),[n]):[n]),a=f(a),d(a);var l=a.filter((function(e){return!!e.storagePath})).map((function(e){return e.storagePath}));r(i?l:l?l[0]:null)}(e,t)}}):null})),Object(n.createElement)(j.a,{flexGrow:1,m:2},Object(n.createElement)(x.a,{color:"textSecondary",variant:"body2",align:"center"},"Drag 'n' drop some files here, or click to select files")))))}function ua(e){var t=e.storagePath,a=e.file,r=e.onFileUploadComplete,i=vt(),l=Object(n.useState)(),c=Object(g.a)(l,2),o=c[0],u=c[1],s=Object(n.useState)(-1),m=Object(g.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(!1),b=Object(g.a)(f,2),v=b[0],E=b[1];Object(n.useEffect)((function(){a&&function(e){u(void 0),p(0);var a=jt(e,t);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(p(t),console.debug("Upload is "+t+"% done"),e.state){case Ce.a.storage.TaskState.PAUSED:console.debug("Upload is paused");break;case Ce.a.storage.TaskState.RUNNING:console.debug("Upload is running")}}),(function(e){console.error("Upload error",e),u(e.message),p(-1),E(!0)}),(function(){var t=a.snapshot.ref.fullPath;p(-1),r(t,e)}))}(a)}),[]);var h=function(e,t){E(!1)};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(j.a,{ml:2,mt:2,mb:2},Object(n.createElement)(w.a,{elevation:0,className:i.uploadItem,variant:"outlined"},d>-1&&Object(n.createElement)(ee.a,{variant:"indeterminate",value:d}),o&&Object(n.createElement)("p",null,"Error uploading file: ",o))),Object(n.createElement)(G.a,{open:v,autoHideDuration:3e3,onClose:h},Object(n.createElement)(et.a,{elevation:6,variant:"filled",onClose:h,severity:"error"},o)))}function sa(e){var t=e.property,a=e.value,r=e.onClear,i=vt();return Object(n.createElement)(j.a,{ml:2,mt:2,mb:2,position:"relative"},Object(n.createElement)(w.a,{elevation:0,className:i.uploadItem,variant:"outlined"},Object(n.createElement)(j.a,{position:"absolute",top:4,right:4},Object(n.createElement)(q.a,{style:{backgroundColor:"white"},onClick:function(e){e.stopPropagation(),r(a)}},Object(n.createElement)(He.a,{fontSize:"small"}))),a&&Object(n.createElement)(Mt,{value:a,property:t,small:!1})))}function ma(e){var t,a,n=e.field,i=e.form,l=i.isSubmitting,c=i.errors,o=i.touched,u=i.setFieldValue,s=e.property,m=e.includeDescription,d=e.allowInfinity,p=(e.createFormField,Object(E.a)(e,["field","form","property","includeDescription","allowInfinity","createFormField"])),f=Object(Ue.f)(c,n.name),b=Object(Ue.f)(o,n.name)&&!!f;"string"===s.dataType&&(a=s.urlMediaType);var v=n.value?n.value:"",h=function(e){if(e)if("number"===y){var t=parseFloat(e);u(n.name,t)}else u(n.name,e);else u(n.name,null)},g=v===1/0,y=g||"number"!==s.dataType?void 0:"number";return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{required:null===(t=s.validation)||void 0===t?void 0:t.required,error:b,disabled:l,fullWidth:!0},r.a.createElement(K.a,null,s.title||n.name),r.a.createElement(F.a,Object.assign({type:y,value:g?"Infinity":v},p,{disabled:g,onChange:function(e){h(e.target.value)}})),d&&r.a.createElement(te.a,{checked:g,labelPlacement:"start",control:r.a.createElement(ae.a,{size:"small",type:"checkbox",onChange:function(e){h(e.target.checked?1/0:void 0)}}),disabled:s.disabled||l,label:r.a.createElement(x.a,{variant:"caption"},"Set value to Infinity")}),b&&r.a.createElement(X.a,{id:"component-error-text"},f),m&&s.description&&r.a.createElement(X.a,null,s.description)),a&&v&&r.a.createElement(j.a,{m:1},r.a.createElement(Mt,{value:v,property:s,small:!1})))}function da(e){var t=e.field,a=e.form,n=a.isSubmitting,i=a.errors,l=a.touched,c=a.setFieldValue,o=e.property,u=e.includeDescription,s=(e.createFormField,Object(E.a)(e,["field","form","property","includeDescription","createFormField"])),m=Object(Ue.f)(i,t.name),d=Object(Ue.f)(l,t.name)&&!!m;return r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,{checked:t.value,control:r.a.createElement(ae.a,Object.assign({},s,{type:"checkbox",onChange:function(e){c(t.name,e.target.checked)}})),disabled:o.disabled||n,label:o.title||t.name}),u&&o.description&&r.a.createElement(X.a,null,o.description),d&&r.a.createElement(X.a,{id:"component-error-text"},m))}function pa(e){var t=e.field,a=e.form,n=a.isSubmitting,i=a.errors,l=a.touched,c=a.setFieldValue,o=e.property,u=(e.createFormField,e.includeDescription,Object(E.a)(e,["field","form","property","createFormField","includeDescription"])),s=Object(Ue.f)(i,t.name),m=Object(Ue.f)(l,t.name)&&!!s,d=t.value;return r.a.createElement(he.a,Object.assign({fullWidth:!0,clearable:!0,value:d,label:o.title||t.name,error:m,disabled:void 0!==o.disabled?o.disabled:n,helperText:m?s:o.description,onChange:function(e){return c(t.name,e)}},u))}function fa(e){var t=e.builder,a=Object(n.useState)(!0),r=Object(g.a)(a,2),i=r[0],l=r[1],c=Object(n.useState)(null),o=Object(g.a)(c,2),u=o[0],s=o[1];return Object(n.useEffect)((function(){t.then((function(e){l(!1),s(e)})).catch((function(e){l(!1),console.error(e)}))}),[t]),i?Object(n.createElement)(pt,null):Object(n.createElement)(n.Fragment,null,u)}!function(e){e.new="new",e.existing="existing"}(Yt||(Yt={}));function ba(e){var t=e.field,a=e.form,n=(a.isSubmitting,a.errors),i=a.touched,l=a.setFieldValue,c=e.property,o=e.includeDescription,u=Object(Ue.f)(n,t.name),s=Object(Ue.f)(i,t.name)&&!!u,m=t.value,d=vt(),p=c.title||t.name;return r.a.createElement(P.a,{error:s,fullWidth:!0},r.a.createElement(w.a,{elevation:0,className:d.paper,variant:"outlined"},r.a.createElement(j.a,{my:1},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},p)),r.a.createElement(va,{value:m,title:p,collectionPath:c.collectionPath,schema:c.schema,initialFilter:c.filter,onEntityClick:function(e){var a=e?e.reference:null;l(t.name,a)}})),o&&c.description&&r.a.createElement(j.a,null,r.a.createElement(X.a,null,c.description)),s&&r.a.createElement(X.a,{id:"component-error-text"},u))}function va(e){var t=e.onEntityClick,a=e.value,n=e.title,i=e.schema,l=e.initialFilter,c=e.collectionPath,o=r.a.useState(!1),u=Object(g.a)(o,2),s=u[0],m=u[1],d=function(){m(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{justify:"space-between",container:!0,spacing:2},r.a.createElement(C.a,{item:!0},a&&r.a.createElement(Lt,{reference:a,schema:i,previewComponent:Mt}),!a&&r.a.createElement(j.a,null,"No value set")),r.a.createElement(j.a,{display:"inline"},a&&r.a.createElement(V.a,{title:"Clear"},r.a.createElement(q.a,{"aria-label":"clear",onClick:function(){m(!1),t(void 0)}},r.a.createElement(nt.a,null))),r.a.createElement(D.a,{variant:"outlined",color:"primary",onClick:function(){m(!0)}},a?"Edit":"Set"))),r.a.createElement(ne.a,{onClose:d,maxWidth:"xl",open:s},r.a.createElement(re.a,null,"Select ",n),r.a.createElement(Bt,{collectionPath:c,schema:i,includeToolbar:!1,onEntityClick:function(e,a){m(!1),t(a)},paginationEnabled:!1,initialFilter:l}),r.a.createElement(ie.a,null,r.a.createElement(D.a,{autoFocus:!0,onClick:d,color:"primary"},"Close"))))}function Ea(e){var t,a,n=e.field,i=e.form,l=(i.isSubmitting,i.errors,i.touched),c=(i.setFieldValue,e.property),o=e.includeDescription,u=e.createFormField,s=(Object(E.a)(e,["field","form","property","includeDescription","createFormField"]),vt()),m=c.properties,d=l&&(null===(t=c.validation)||void 0===t?void 0:t.required)&&!n.value;return r.a.createElement(P.a,{fullWidth:!0,error:d},r.a.createElement(X.a,{filled:!0,required:null===(a=c.validation)||void 0===a?void 0:a.required},c.title||n.name),r.a.createElement(w.a,{elevation:0,variant:"outlined",className:s.paper},r.a.createElement(j.a,{m:1},r.a.createElement(C.a,{container:!0,spacing:1},Object.entries(m).map((function(e,t){var a=Object(g.a)(e,2),i=a[0],l=a[1];return r.a.createElement(C.a,{item:!0,xs:12,key:"map-".concat(n.name,"-").concat(t)},u("".concat(n.name,"[").concat(i,"]"),l,o))}))))),o&&c.description&&r.a.createElement(X.a,null,c.description))}function ha(e){var t=e.field,a=e.form,n=a.errors,i=a.touched,l=e.property,c=e.createFormField,o=e.includeDescription,u=vt(),s=l.of,m=t.value&&t.value.length>0,d=Object(Ue.f)(n,t.name),p=Object(Ue.f)(i,t.name)&&!!d;return r.a.createElement(Ue.c,{name:t.name,render:function(e){var a;return r.a.createElement(P.a,{fullWidth:!0,error:p},r.a.createElement(X.a,{filled:!0,required:null===(a=l.validation)||void 0===a?void 0:a.required},l.title||t.name),r.a.createElement(w.a,{variant:"outlined",className:u.paper},m?r.a.createElement(r.a.Fragment,null,t.value.map((function(a,n){return r.a.createElement(j.a,{key:"field_".concat(n),mb:1,display:"flex"},r.a.createElement(j.a,{flexGrow:1,key:"field_".concat(t.name,"_entryValue")},c("".concat(t.name,"[").concat(n,"]"),s,o)),r.a.createElement(j.a,null,r.a.createElement(q.a,{"aria-label":"remove",onClick:function(){return e.remove(n)}},r.a.createElement(rt.a,null))),r.a.createElement(j.a,null,r.a.createElement(q.a,{"aria-label":"insert",onClick:function(){return e.insert(n+1,void 0)}},r.a.createElement(it.a,null))))}))):r.a.createElement(j.a,{margin:2},r.a.createElement(D.a,{onClick:function(){return e.push(null)}},"Add"))),o&&l.description&&r.a.createElement(j.a,null,r.a.createElement(X.a,null,l.description)),p&&r.a.createElement(X.a,{id:"component-error-text"},d))}})}function ga(e){var t=e.field,a=e.form,n=a.errors,i=a.touched,l=e.property,c=e.createFormField,o=e.includeDescription;if("map"!==l.of.dataType)throw console.error(l),Error("Field misconfiguration: this array field should have type map");var u=vt(),s=l.of.properties,m=Object(Ue.f)(n,t.name),d=Object(Ue.f)(i,t.name)&&!!m;return r.a.createElement(Ue.c,{name:t.name,render:function(e){var a,n,p=t.value&&t.value.length>0,f=i&&(null===(a=l.validation)||void 0===a?void 0:a.required)&&!t.value;return r.a.createElement(P.a,{fullWidth:!0,error:f},r.a.createElement(X.a,{filled:!0,required:null===(n=l.validation)||void 0===n?void 0:n.required},l.title||t.name),r.a.createElement(w.a,{elevation:0,className:u.paper},p?r.a.createElement(N.a,null,r.a.createElement(_.a,null,t.value.map((function(a,n){return r.a.createElement(A.a,{key:"field_".concat(n)},Object.entries(s).map((function(e){var a=Object(g.a)(e,2),i=a[0],l=a[1];return r.a.createElement(W.a,{key:"field_".concat(i)},c("".concat(t.name,"[").concat(n,"].").concat(i),l,o))})),r.a.createElement(W.a,{size:"small",padding:"none"},r.a.createElement(q.a,{"aria-label":"remove",onClick:function(){return e.remove(n)}},r.a.createElement(rt.a,null))),r.a.createElement(W.a,{size:"small",padding:"none"},r.a.createElement(q.a,{"aria-label":"insert",onClick:function(){return e.insert(n+1,{})}},r.a.createElement(it.a,null))))})))):r.a.createElement(j.a,{margin:2},r.a.createElement(D.a,{onClick:function(){return e.push(null)}},"Add"))),o&&l.description&&r.a.createElement(j.a,null,r.a.createElement(X.a,null,l.description)),d&&r.a.createElement(X.a,{id:"component-error-text"},m))}})}function ya(e){var t,a=e.field,n=e.property,i=e.includeDescription,l=vt();return r.a.createElement(P.a,{fullWidth:!0,disabled:!0},r.a.createElement(X.a,{filled:!0,required:null===(t=n.validation)||void 0===t?void 0:t.required},n.title||a.name),r.a.createElement(w.a,{elevation:0,className:l.paper,variant:"outlined"},a.value&&r.a.createElement(Mt,{value:a.value,property:n,small:!1}),!a.value&&r.a.createElement(j.a,{m:1},"No value set")),i&&n.description&&r.a.createElement(X.a,null,n.description))}function ja(e,t,a){return t.disabled?Oa(e,t,a,ya):(t.customField?n=t.customField:"array"===t.dataType?n="string"!==t.of.dataType&&"number"!==t.of.dataType||!t.of.enumValues?"string"===t.of.dataType&&t.of.storageMeta?ca:"map"===t.of.dataType?ga:ha:la:"map"===t.dataType?n=Ea:"reference"===t.dataType?n=ba:"timestamp"===t.dataType?n=pa:"boolean"===t.dataType?n=da:"number"===t.dataType?n=t.enumValues?ia:ma:"string"===t.dataType&&(n=t.storageMeta?ca:t.enumValues?ia:ma),n?Oa(e,t,a,n,t.additionalProps):r.a.createElement("div",null,"Currently the field ".concat(t.dataType," is not supported")));var n}function Oa(e,t,a,n,i){var l;return r.a.createElement(Ue.b,{required:null===(l=t.validation)||void 0===l?void 0:l.required,name:"".concat(e)},(function(e){return r.a.createElement(n,Object(h.a)({},e,{},i,{includeDescription:a,property:t,createFormField:ja}))}))}function wa(e){if("string"===e.dataType)return function(e){var t=Object(lt.f)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);e.enumValues&&(t=t.oneOf(Object.keys(e.enumValues)));return t}(e);if("number"===e.dataType)return function(e){var t=e.validation,a=Object(lt.d)().typeError((null===t||void 0===t?void 0:t.requiredMessage)?null===t||void 0===t?void 0:t.requiredMessage:"Must be a number");a=(null===t||void 0===t?void 0:t.required)?a.required(t.requiredMessage).nullable(!1):a.notRequired().nullable(!0);return a}(e);if("boolean"===e.dataType)return function(e){var t=Object(lt.b)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);if("map"===e.dataType)return Ta(e.properties);if("array"===e.dataType)return function(e){var t=Object(lt.a)().of(wa(e.of)),a=e.validation;(null===a||void 0===a?void 0:a.required)&&(t=t.required(a.requiredMessage).nullable(!1));return t}(e);if("timestamp"===e.dataType)return function(e){var t=Object(lt.c)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);if("geopoint"===e.dataType)return function(e){var t=Object(lt.e)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);if("reference"===e.dataType)return function(e){var t=Object(lt.e)(),a=e.validation;t=(null===a||void 0===a?void 0:a.required)?t.required(a.requiredMessage).nullable(!1):t.notRequired().nullable(!0);return t}(e);throw Error("Unsupported data type in yup mapping")}function Ta(e){var t={};return Object.entries(e).forEach((function(e){var a=Object(g.a)(e,2),n=a[0],r=a[1];t[n]=wa(r)})),Object(lt.e)().shape(t)}function ka(e){var t,a=e.status,n=e.collectionPath,i=e.schema,l=e.entity,c=e.onEntitySave,o=vt(),u=r.a.useState(void 0),s=Object(g.a)(u,2),m=s[0],d=s[1],p=r.a.useState(!1),f=Object(g.a)(p,2),b=f[0],v=f[1],E=r.a.useState(),h=Object(g.a)(E,2),y=h[0],O=h[1],T=a===Yt.new&&!!i.customId;if(a===Yt.new)t=yt(i);else{if(a!==Yt.existing||!l)throw new Error("Form configured wrong");t=l.values}return r.a.createElement(Ue.e,{initialValues:t,validate:function(e){return console.debug("validate",e)},onSubmit:function(e,t){if(T&&!m)return console.error("Missing custom Id"),v(!0),void t.setSubmitting(!1);var r;if(O(null),v(!1),a===Yt.existing){if(!(null===l||void 0===l?void 0:l.id))throw Error("Form misconfigured when saving, no id for existing entity");r=l.id}else{if(a!==Yt.new)throw Error("New FormType added, check EntityForm");if(i.customId){if(!m)throw Error("Form misconfigured when saving, customId should be set");r=m}}c(n,r,e).catch((function(e){console.error(e),O(e)})).finally((function(){t.setSubmitting(!1)}))},validationSchema:Ta(i.properties)},(function(e){e.values,e.errors,e.touched,e.handleChange,e.handleBlur;var t=e.handleSubmit,n=e.isSubmitting;return r.a.createElement(w.a,{elevation:1},r.a.createElement(ce.a,{maxWidth:"md",className:o.formPaper,disableGutters:!0},r.a.createElement(j.a,{margin:1},function(e,t,a,n,i){var l=t!==Yt.new||!e.customId,c="object"===typeof e.customId,o={label:t===Yt.new&&l?"Id is set automatically":"Id",disabled:l,name:"id",type:null,value:i,variant:"outlined"};return r.a.createElement(P.a,Object.assign({fullWidth:!0,error:n},o),c&&e.customId&&r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{id:"id-label"},o.label),r.a.createElement(S.a,Object.assign({labelId:"id-label",error:n},o,{onChange:function(e){return a(e.target.value)}}),Object.entries(e.customId).map((function(e){var t=Object(g.a)(e,2),a=t[0],n=t[1];return r.a.createElement(I.a,{value:a},"".concat(a," - ").concat(n))})))),!c&&r.a.createElement(le.a,Object.assign({},o,{error:n,onChange:function(e){return a(e.target.value)}})),r.a.createElement(Ue.a,{name:"id",component:"div"},(function(e){return"You need to specify an ID"})))}(i,a,d,b,null===l||void 0===l?void 0:l.id)),r.a.createElement(Ue.d,{className:o.form,onSubmit:t,noValidate:!0},r.a.createElement(j.a,{padding:1},r.a.createElement(C.a,{container:!0,spacing:3},function(e){return r.a.createElement(r.a.Fragment,null,Object.entries(e.properties).map((function(t){var a=Object(g.a)(t,2),n=a[0],i=a[1],l=ja(n,i,!0);return"array"===i.dataType&&"map"===i.of.dataType||"array"===i.dataType&&"string"===i.of.dataType&&i.of.storageMeta||"string"===i.dataType&&i.storageMeta?r.a.createElement(C.a,{item:!0,xs:12,key:"field_".concat(e.name,"_").concat(n)},l):r.a.createElement(C.a,{item:!0,xs:12,sm:6,key:"field_".concat(e.name,"_").concat(n)},l)})))}(i))),y&&r.a.createElement(j.a,{textAlign:"right"},y),r.a.createElement(j.a,{textAlign:"right"},a===Yt.existing&&r.a.createElement(D.a,{variant:"text",color:"primary",disabled:n,className:o.button,type:"reset"},"Discard"),r.a.createElement(D.a,{variant:"contained",color:"primary",type:"submit",disabled:n,className:o.button},"Save")))))}))}function Pa(e){var t=e.subcollectionPath,a=e.selectedView,n=e.thisView,i=e.onEntityClick,l=(Object(E.a)(e,["subcollectionPath","selectedView","thisView","onEntityClick"]),r.a.useState(void 0)),c=Object(g.a)(l,2),o=c[0],u=c[1],s=void 0!==n.deleteEnabled||n.deleteEnabled;return r.a.createElement(C.a,{hidden:a!==n},t?r.a.createElement(Bt,{collectionPath:t,onEntityDelete:s?function(e,t){u(t)}:void 0,schema:n.schema,onEntityEdit:i,includeToolbar:!1,paginationEnabled:!1,additionalColumns:n.additionalColumns}):r.a.createElement(C.a,{container:!0},r.a.createElement(j.a,{m:3},"You need to save your entity before adding additional collections")),r.a.createElement(aa,{entity:o,schema:n.schema,open:!!o,onClose:function(){return u(void 0)}}))}function xa(e){var t=e.parentCollectionPath,a=e.subcollections,n=e.entity,i=e.onEntityClick;if(!a)throw Error("Subcollection view must use a schema with subcollection entries");var l=Object.values(a)[0],c=r.a.useState(l),o=Object(g.a)(c,2),u=o[0],s=o[1];var m=void 0;return n&&(m="".concat(t,"/").concat(n.id,"/").concat(u.relativePath)),r.a.createElement(w.a,{elevation:0},r.a.createElement(oe.a,{position:"static",color:"transparent",elevation:0},r.a.createElement(C.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-end"},r.a.createElement(ue.a,{value:u,onChange:function(e,t){s(t)}},Object.entries(a).map((function(e){var t=Object(g.a)(e,2),a=t[0],n=t[1];return r.a.createElement(se.a,{label:n.name,value:n,key:"wrapped-tab-".concat(a)})}))),r.a.createElement(j.a,{m:1,textAlign:"right"},m&&r.a.createElement(D.a,{component:ke.b,to:Zt(m),size:"medium",variant:"outlined",color:"primary"},"Add ",u.schema.name)))),Object.entries(a).map((function(e){var t=Object(g.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Pa,{key:"wrapped-tab-content-".concat(a),selectedView:u,thisView:n,onEntityClick:i,subcollectionPath:m})})))}function Ca(e){var t,a,i,l=e.view,c=e.entityPlaceholderPath,o=e.breadcrumbs,u=e.match,s=e.history,m=(Object(E.a)(e,["view","entityPlaceholderPath","breadcrumbs","match","history"]),Kt(c,l));i=u.params,a=Jt(i,c),t=i[m];var d=Object(n.useState)(),p=Object(g.a)(d,2),f=p[0],b=p[1],v=Object(n.useState)(),h=Object(g.a)(v,2),y=h[0],O=h[1],w=Object(n.useState)(!0),T=Object(g.a)(w,2),k=T[0],P=T[1];Object(n.useEffect)((function(){t?ht(a,t,l.schema).then((function(e){O(Yt.existing),b(e)})).finally((function(){return P(!1)})):(O(Yt.new),P(!1))}),[a,t,l]);s.listen((function(e){}));var C=function(e,t){q(!1)},S=function(e,t){N(void 0)},I=r.a.useState(!1),F=Object(g.a)(I,2),V=F[0],q=F[1],D=r.a.useState(void 0),L=Object(g.a)(D,2),M=L[0],N=L[1];var _=y===Yt.existing,A=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{mb:3},r.a.createElement(ft,null,r.a.createElement(Y.a,{"aria-label":"breadcrumb"},r.a.createElement(J.a,{key:"breadcrumb-home",color:"inherit",component:ke.b,to:"/"},"Home"),o.map((function(e){return e.placeHolderId&&!i[e.placeHolderId]?null:r.a.createElement(J.a,{key:"breadcrumb-".concat(e.entityPlaceholderPath),color:"inherit",component:ke.b,to:$t(Jt(i,e.entityPlaceholderPath))},e.placeHolderId?i[e.placeHolderId]:e.view.name)})).filter((function(e){return!!e})),r.a.createElement(x.a,{color:"textPrimary"},_?"Edit":"Add New")))),r.a.createElement(j.a,{mb:3},r.a.createElement(x.a,{variant:"h5"},_?"Edit":"Add New"," ",l.schema.name)),r.a.createElement(ka,{status:y,collectionPath:a,schema:l.schema,onEntitySave:function(e,a,n){return function(e,t,a){var n;return console.log("Saving entity",e,t,a),(n=t?Object(xe.firestore)().collection(e).doc(t):Object(xe.firestore)().collection(e).doc()).set(a,{merge:!0}).then((function(){return n.id}))}(e,a,n).then((function(t){q(!0),y===Yt.new&&(P(!0),b(void 0),O(void 0),s.replace(Xt(t,e)))})).catch((function(a){N(a),console.error("Error saving entity",e,t,n),console.error(a)}))},entity:f}),l.subcollections&&r.a.createElement(xa,{parentCollectionPath:a,subcollections:l.subcollections,entity:f,onEntityClick:function(e,t){var a=Xt(t.id,e);s.push(a)}}));return r.a.createElement(r.a.Fragment,null,k?r.a.createElement(pt,null):A,r.a.createElement(G.a,{open:V,autoHideDuration:3e3,onClose:C},r.a.createElement(et.a,{elevation:6,variant:"filled",onClose:C,severity:"success"},"The item has been saved correctly")),r.a.createElement(G.a,{open:!!M,autoHideDuration:3e3,onClose:S},r.a.createElement(et.a,{elevation:6,variant:"filled",onClose:S,severity:"error"},r.a.createElement(j.a,null,"Error saving"),r.a.createElement(j.a,null,null===M||void 0===M?void 0:M.message))))}function Sa(){var e=bt(),t={full_path:"",name:"Root",children:[],ref:Object(xe.storage)().ref()},a=Object(n.useState)({"":t}),i=Object(g.a)(a,2),l=i[0];i[1];return r.a.createElement(ct.a,{className:e.tree,defaultCollapseIcon:r.a.createElement(st.a,null),defaultExpandIcon:r.a.createElement(dt.a,null),onNodeToggle:function(e,t){}},function e(t){return r.a.createElement(ot.a,{nodeId:t.full_path,label:t.name},t.children.map((function(t){return e(t)})))}(l[""]))}function Ia(e){Object.assign({},e);var t=vt(),a=Object(n.useState)([]),i=Object(g.a)(a,2),l=i[0];i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{container:!0,spacing:2},r.a.createElement(C.a,{item:!0,xs:12,sm:3},r.a.createElement(w.a,{elevation:0,className:t.paper},r.a.createElement(Sa,null))),r.a.createElement(C.a,{item:!0,xs:12,sm:9},r.a.createElement(D.a,{disabled:!l.length,onClick:function(){jt(l[0])}},"Upload"))))}var Fa=new xe.auth.GoogleAuthProvider,Va=r.a.createContext(null);function qa(e){var t=e.name,a=e.logo,i=e.navigation,l=e.includeMedia,c=e.authentication,o=e.allowSkipLogin,u=(e.firebaseConfig,e.additionalViews),s=bt(),m=Object(we.a)(),d=r.a.useState(!1),f=Object(g.a)(d,2),E=f[0],h=f[1],y=r.a.useState(!1),O=Object(g.a)(y,2),w=O[0],T=O[1],k=r.a.useState(),P=Object(g.a)(k,2),S=P[0],I=P[1],F=r.a.useState(!0),V=Object(g.a)(F,2),N=V[0],_=V[1],A=r.a.useState(null),W=Object(g.a)(A,2),R=W[0],B=W[1],H=r.a.useState(!1),z=Object(g.a)(H,2),G=z[0],Y=z[1],J=r.a.useState(),K=Object(g.a)(J,2),X=K[0],Z=K[1],Q=r.a.useState(!1),ee=Object(g.a)(Q,2),te=ee[0],ae=ee[1],ne=r.a.useState(!1),re=Object(g.a)(ne,2),ie=re[0],le=re[1],ce=void 0===c||!!c,ue=ce&&o,se=c instanceof Function?c:void 0,ve=function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae(!1),!se||!t){e.next=8;break}return e.next=4,se(t);case 4:e.sent?B(t):ae(!0),e.next=9;break;case 8:B(t);case 9:_(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function he(e){try{Object(xe.initializeApp)(e),Object(xe.auth)().onAuthStateChanged(ve,(function(e){return Z(e)})),le(!1),T(!0)}catch(t){console.error(t),le(!0)}}Object(n.useEffect)((function(){fetch("/__/firebase/init.json").then(function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Firebase init response",t),!(t&&t.status<300)){e.next=6;break}return e.next=4,t.json();case 4:he(e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return I("Could not load Firebase configuration from Firebase hosting. If the app is not deployed in Firebase hosting, you need to specify the configuration manually"+e.toString())}))}),[]);var je=function(){return h(!E)};function Oe(){Z(null),Object(xe.auth)().signInWithPopup(Fa).then((function(e){})).catch((function(e){return Z(e)}))}function Ce(){Z(null),Y(!0)}function Se(){Object(xe.auth)().signOut(),Y(!1)}function Ie(e){var t=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[];return t.forEach((function(t){var i=Qt(t.relativePath),l=Qt("".concat(a,"/").concat(i)),c=Kt(l||"",t),o="".concat(l,"/:").concat(c),u=[].concat(Object(p.a)(n),[{entityPlaceholderPath:l,view:t},{entityPlaceholderPath:o,placeHolderId:c,view:t}]),s={entries:[{routeType:"entity",placeHolderId:c,fullPath:"".concat(l,"/new")},{routeType:"entity",placeHolderId:c,fullPath:o},{routeType:"collection",placeHolderId:c,fullPath:l}],breadcrumbs:u,entityPlaceholderPath:l,view:t};t.schema.subcollections&&e(t.schema.subcollections,o,u).forEach((function(e){return r.push(e)})),r.push(s)})),r}(i),a=Qt(i[0].relativePath);return r.a.createElement(Pe.d,null,t.map((function(e){var t=e.entries,a=e.entityPlaceholderPath,n=e.breadcrumbs,i=e.view;return t.map((function(e){return r.a.createElement(Pe.b,{path:$t(e.fullPath),key:"navigation_".concat(e.routeType,"_").concat(e.placeHolderId),render:function(t){if("entity"===e.routeType)return r.a.createElement(Ca,Object.assign({},t,{view:i,breadcrumbs:n,entityPlaceholderPath:a}));if("collection"===e.routeType)return r.a.createElement(ra,Object.assign({},t,{view:i,breadcrumbs:n,entityPlaceholderPath:a}));throw Error("No know routeType")}})}))})).flat(),e&&r.a.createElement(Pe.b,{path:"/media"},r.a.createElement(Ia,null)),u&&u.map((function(e){return r.a.createElement(Pe.b,{key:"additional_view_"+e.path,path:ea(e.path)},e.view)})),r.a.createElement(Pe.a,{exact:!0,from:"/",to:$t(a)}))}return r.a.createElement(Te.a,{theme:m},r.a.createElement(ge.a,{utils:ye.a},ie?r.a.createElement(j.a,null,"It seems like the provided Firebase config is not correct"):N?r.a.createElement(pt,null):!ce||R||G?function(){if(S)return r.a.createElement(j.a,null," ",S," ");if(!w)return r.a.createElement(pt,null);var e=void 0!==l&&l,n=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:s.toolbar},a&&r.a.createElement("img",{className:s.logo,src:a})),r.a.createElement(U.a,null),r.a.createElement(L.a,null,Object.entries(i).map((function(e,t){var a=Object(g.a)(e,2),n=a[0],i=a[1];return r.a.createElement(M.a,{button:!0,key:"navigation_".concat(t,"_").concat(n),component:ke.b,to:$t(i.relativePath)},r.a.createElement($.a,{primary:i.name,primaryTypographyProps:{variant:"subtitle2"}}))})),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null),r.a.createElement(M.a,{button:!0,component:ke.b,to:"/media"},r.a.createElement($.a,{primary:"Media",primaryTypographyProps:{variant:"subtitle2"}}))),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null),u.map((function(e){return r.a.createElement(M.a,{button:!0,key:"additional-view-".concat(e.path),component:ke.b,to:ea(e.path)},r.a.createElement($.a,{primary:e.name,primaryTypographyProps:{variant:"subtitle2"}}))})))));return r.a.createElement(Va.Provider,{value:R},r.a.createElement(ke.a,null,r.a.createElement(j.a,{className:s.root},r.a.createElement(me.a,null),r.a.createElement(oe.a,{position:"fixed",className:s.appBar},r.a.createElement(de.a,null,r.a.createElement(q.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:je,className:s.menuButton},r.a.createElement(Ee.a,null)),r.a.createElement(x.a,{variant:"h6",noWrap:!0},t),r.a.createElement(j.a,{className:s.grow}),r.a.createElement(j.a,{p:2},R&&R.photoURL?r.a.createElement(pe.a,{src:R.photoURL}):r.a.createElement(pe.a,null,(null===R||void 0===R?void 0:R.displayName)?R.displayName[0]:"A")),r.a.createElement(D.a,{variant:"text",color:"inherit",onClick:Se},"Log Out"))),r.a.createElement("nav",{className:s.drawer},r.a.createElement(fe.a,{mdUp:!0,implementation:"css"},r.a.createElement(be.a,{variant:"temporary",anchor:"rtl"===m.direction?"right":"left",open:E,onClose:je,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0}},n)),r.a.createElement(fe.a,{smDown:!0,implementation:"css"},r.a.createElement(be.a,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0},n))),r.a.createElement("main",{className:s.content},r.a.createElement(j.a,{className:s.toolbar}),Ie(e)))))}():r.a.createElement(C.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(j.a,{className:s.toolbar},a&&r.a.createElement("img",{className:s.logo,src:a})),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:Oe},"Google login")),ue&&r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(D.a,{onClick:Ce},"Skip login")),r.a.createElement(C.a,{item:!0,xs:12},te&&r.a.createElement(j.a,{p:2},"It looks like you don't have access to the CMS, based on the specified Authenticator configuration"),X&&r.a.createElement(j.a,{p:2},X.message)))))}var Da=function(){function e(t,a){Object(m.a)(this,e),this.algoliaClient=t,this.index=t.initIndex(a)}return Object(d.a)(e,[{key:"performTextSearch",value:function(e){return console.log("Performing Algolia query",e),this.index.search(e).then((function(e){var t=e.hits;return console.log(t),t.map((function(e){return e.objectID}))})).catch((function(e){return console.log(e),[]}))}}]),e}(),La=a(206);var Ma={customId:!0,name:"Product",properties:{name:{title:"Name",validation:{required:!0},dataType:"string",includeInListView:!0,includeAsMapPreview:!0},price:{title:"Price",validation:{required:!0,requiredMessage:"You must set a price"},filterable:!0,dataType:"number",includeInListView:!0},status:{title:"Status",validation:{required:!0},dataType:"string",enumValues:{private:"Private",public:"Public"},includeInListView:!0},categories:{title:"Categories",validation:{required:!0},dataType:"array",of:{dataType:"string",enumValues:{electronics:"Electronics",books:"Books",furniture:"Furniture",clothing:"Clothing",food:"Food"}},includeInListView:!0},image:{title:"Image",dataType:"string",storageMeta:{mediaType:"image",storagePath:"images",acceptedFiles:["image/*"]},includeInListView:!0,includeAsMapPreview:!0},tags:{title:"Tags",description:"Example of generic array",validation:{required:!0},dataType:"array",of:{dataType:"string"},includeInListView:!0},description:{title:"Description",description:"Not mandatory but it'd be awesome if you filled this up",dataType:"string",includeInListView:!1},published:{title:"Published",dataType:"boolean",includeInListView:!0},expires_on:{title:"Expires on",dataType:"timestamp",includeInListView:!0},publisher:{title:"Publisher",description:"This is an example of a map property",dataType:"map",properties:{name:{title:"Name",includeInListView:!0,dataType:"string"},external_id:{title:"External id",includeInListView:!0,dataType:"string"}},includeInListView:!0},available_locales:{title:"Available locales",description:"This is an example of a disabled field",dataType:"array",disabled:!0,of:{dataType:"string"},includeInListView:!0}}},Na={name:"Blog entry",properties:{name:{title:"Name",validation:{required:!0},filterable:!0,dataType:"string",includeInListView:!0},long_text:{title:"Long text",description:"This field is using a custom component",validation:{required:!0},dataType:"string",customField:function(e){var t,a=e.property,n=e.field,i=e.rows,l=e.form,c=l.isSubmitting,o=l.errors,u=l.touched,s=l.setFieldValue,m=(Object(E.a)(e,["property","field","rows","form"]),Object(La.a)(o,n.name)),d=Object(La.a)(u,n.name)&&!!m,p=n.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{required:null===(t=a.validation)||void 0===t?void 0:t.required,error:d,disabled:c,fullWidth:!0},r.a.createElement(K.a,null,a.title||n.name),r.a.createElement(F.a,{multiline:!0,rows:i,defaultValue:p,onChange:function(e){return s(n.name,e.target.value)}}),d&&r.a.createElement(X.a,{id:"component-error-text"},m),a.description&&r.a.createElement(X.a,null,a.description)))},additionalProps:{rows:5},includeInListView:!1},images:{title:"Images",dataType:"array",of:{dataType:"string",storageMeta:{mediaType:"image",storagePath:"images",acceptedFiles:["image/*"]}},includeInListView:!0},priority:{title:"Priority",description:"This field allows the selection of Infinity as a value",dataType:"number",additionalProps:{allowInfinity:!0},includeInListView:!1},content:{title:"Content",validation:{required:!0},dataType:"array",of:{dataType:"string"},includeInListView:!1},status:{title:"Status",validation:{required:!0},dataType:"string",filterable:!0,enumValues:{published:"Published",draft:"Draft"},includeInListView:!0},products:{title:"Products",validation:{required:!0},dataType:"array",of:{dataType:"reference",collectionPath:"products",schema:Ma},includeInListView:!0}}},_a={customId:!0,name:"Test entity",properties:{tags:{title:"Tags",includeInListView:!0,dataType:"array",of:{dataType:"string"}},title:{title:"Title",description:"A catching title is important",includeInListView:!0,dataType:"string"},description:{title:"Description",includeInListView:!0,dataType:"string"},search_adjacent:{title:"Search adjacent",includeInListView:!0,dataType:"boolean"},difficulty:{title:"Difficulty",includeInListView:!0,dataType:"number"},created_at:{title:"Created at",includeInListView:!0,dataType:"timestamp"},image:{title:"Image",dataType:"string",includeInListView:!0,storageMeta:{mediaType:"image",storagePath:"test",acceptedFiles:["image/*"]}}}},Aa={title:"Spanish title",builder:function(e){return r.a.createElement(fa,{builder:e.reference.collection("locales").doc("es-ES").get().then((function(e){return e.get("title")}))})}},Wa=void 0,Ra={name:"Locales",relativePath:"locales",schema:{customId:{"de-DE":"German","en-US":"English (United States)","es-ES":"Spanish (Spain)","es-419":"Spanish (South America)"},name:"Locale",properties:{title:{title:"Title",validation:{required:!0},dataType:"string",includeInListView:!0},selectable:{title:"Selectable",description:"Is this locale selectable",dataType:"boolean",includeInListView:!0},video:{title:"Video",dataType:"string",validation:{required:!1},storageMeta:{mediaType:"video",storagePath:"videos",acceptedFiles:["video/*"]},includeInListView:!0}}}},Ua=[{relativePath:"products",schema:Ma,name:"Products",textSearchDelegate:(Wa=s()("Y6FR1MDSVW","f084e6dcc154c04295c8124dbb797ff1"))&&new Da(Wa,"products"),additionalColumns:[Aa],subcollections:[Ra]},{relativePath:"users",schema:{name:"User",properties:{first_name:{title:"First name",dataType:"string",includeInListView:!0,filterable:!0},last_name:{title:"Last name",dataType:"string",includeInListView:!0},picture:{title:"Picture",dataType:"map",properties:{large:{title:"Large",dataType:"string",urlMediaType:"image",includeAsMapPreview:!0},medium:{title:"Medium",dataType:"string",urlMediaType:"image"},thumbnail:{title:"Thumbnail",dataType:"string",urlMediaType:"image"}},includeInListView:!0},email:{title:"Email",dataType:"string",includeInListView:!0},phone:{title:"Phone",dataType:"string",includeInListView:!0}}},name:"Users",textSearchDelegate:Wa&&new Da(Wa,"users")},{relativePath:"blog",schema:Na,name:"Blog",textSearchDelegate:Wa&&new Da(Wa,"blog")}];l.a.render(r.a.createElement(qa,{name:"Test shop CMS",authentication:function(e){return console.log("Allowing access to",null===e||void 0===e?void 0:e.email),!0},allowSkipLogin:!0,logo:o.a,navigation:Ua,firebaseConfig:{apiKey:"AIzaSyBzt-JvcXvpDrdNU7jYX3fC3v0EAHjTKEw",authDomain:"firecms-demo-27150.firebaseapp.com",databaseURL:"https://firecms-demo-27150.firebaseio.com",projectId:"firecms-demo-27150",storageBucket:"firecms-demo-27150.appspot.com",messagingSenderId:"837544933711",appId:"1:837544933711:web:75822ffc0840e3ae01ad3a",measurementId:"G-8HRE8MVXZJ"}}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[272,1,2]]]);
//# sourceMappingURL=main.260c76f3.chunk.js.map